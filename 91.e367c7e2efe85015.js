"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[91],{2135:(I,C,a)=>{a.d(C,{u:()=>_});var i=a(5879);let _=(()=>{class h{transform(u,l){return u?l?(l=l.toLowerCase(),u.filter(c=>{const v=c.full_name?c.full_name.toLowerCase():"",t=c.last_name?c.last_name.toLowerCase():"",g=c.title?c.title.toLowerCase():"",d=c.name?c.name.toLowerCase():"",f=c.user&&c.user.name?c.user.name.toLowerCase():"",b=c.head?c.head.toLowerCase():"",M=c.description?c.description.toLowerCase():"";return v.includes(l)||t.includes(l)||d.includes(l)||f.includes(l)||b.includes(l)||M.includes(l)||g.includes(l)})):u:[]}static#t=this.\u0275fac=function(l){return new(l||h)};static#e=this.\u0275pipe=i.Yjl({name:"filter",type:h,pure:!0,standalone:!0})}return h})()},1600:(I,C,a)=>{a.r(C),a.d(C,{default:()=>N});var i=a(6814),_=a(8034),h=a(1818),r=a(2135),u=a(6223),l=a(8733),c=a(846),v=a(7728),t=a(5879),g=a(5401),d=a(9862),f=a(553);let b=(()=>{class s{constructor(e){this.http=e,this.InstitiutesListUrl=`${f.N.url}institute`}GetInstitiutesList(e){let n=new d.LE;return e&&Object.keys(e).forEach(o=>{n=n.append(o,e[o])}),this.http.get(this.InstitiutesListUrl,{params:n})}AddInstitute(e,n){let o=new d.LE;n&&Object.keys(n).forEach(m=>{o=o.append(m,n[m])});const p=new FormData;return Object.keys(e).forEach(m=>{p.append(m,e[m])}),this.http.post(this.InstitiutesListUrl,p,{params:o})}GetInstituteById(e){return this.http.get(`${this.InstitiutesListUrl}/${e}`)}UpdateInstitute(e,n,o){const p=`${this.InstitiutesListUrl}/${e}`;let m=new d.LE;o&&Object.keys(o).forEach(O=>{m=m.append(O,o[O])});const x=new FormData;return Object.keys(n).forEach(O=>{x.append(O,n[O])}),this.http.post(p,x,{params:m})}DeleteInstitute(e){return this.http.delete(`${this.InstitiutesListUrl}/${e}`)}static#t=this.\u0275fac=function(n){return new(n||s)(t.LFG(d.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var M=a(7700);function A(s,P){1&s&&(t.TgZ(0,"div",25)(1,"p"),t._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),t.qZA()())}const F=function(s,P){return[s,P]};function Z(s,P){if(1&s){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"h5",16),t._uU(6),t.qZA(),t.TgZ(7,"p",17),t._UZ(8,"app-truncate-text",18),t.qZA()(),t.TgZ(9,"div",19)(10,"a",20),t.ALo(11,"localize"),t._uU(12,"\u062a\u0639\u062f\u064a\u0644 "),t._UZ(13,"i",21),t.qZA(),t.TgZ(14,"button",22),t.NdJ("click",function(){const p=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteinstitute(p.id,p.name))}),t._uU(15," \u062d\u0630\u0641 "),t._UZ(16,"i",23),t.qZA()()()()(),t.YNc(17,A,3,0,"div",24),t.ALo(18,"filter"),t.qZA()}if(2&s){const e=P.$implicit,n=t.oxw();t.xp6(6),t.Oqu(e.name),t.xp6(2),t.Q6J("text",e.description)("limit",100),t.xp6(2),t.Q6J("routerLink",t.WLB(10,F,t.lcZ(11,5,"/dashboard/institutes/add-institute"),e.id)),t.xp6(7),t.Q6J("ngIf",0===t.xi3(18,7,n.institutes,n.searchQuery).length&&!n.loading)}}let L=(()=>{class s{constructor(e,n,o){this.blogService=e,this.institutesService=n,this.dialog=o,this.institutes=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.blogService.initializeNavItems(),this.getInstitutesList()}getInstitutesList(e=1){this.loading=!0,this.institutesService.GetInstitiutesList({page:e}).subscribe({next:n=>{this.loading=!1,this.institutes=n.data.data},error:n=>{this.loading=!1,console.error("Error in Institutes list",n)}})}deleteinstitute(e,n){this.dialog.open(_.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${n} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(p=>{p&&this.institutesService.DeleteInstitute(e.toString()).subscribe({next:m=>{this.getInstitutesList()},error:m=>{console.error("There was an error deleting the Institute!",m)}})})}onPageChange(e){this.getInstitutesList(e)}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(g.Q),t.Y36(b),t.Y36(M.uw))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-institutes-list"]],standalone:!0,features:[t.jDz],decls:14,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-lg-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-7","col-md-8","mb-md-0","mb-2"],[1,"card-title"],[1,"card-text"],[3,"text","limit"],[1,"col-xl-5","col-md-4","mb-md-0","mb-2","text-md-end","text-center"],[1,"btn","px-4","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete","px-4",3,"click"],[1,"fa-regular","fa-trash-can"],["class","text-center",4,"ngIf"],[1,"text-center"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"input",8),t.NdJ("ngModelChange",function(m){return o.searchQuery=m}),t.qZA()()()()(),t.TgZ(10,"div",1),t.YNc(11,Z,19,13,"div",9),t.ALo(12,"filter"),t.qZA(),t.TgZ(13,"pagination",10),t.NdJ("pageChange",function(m){return o.onPageChange(m)}),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngModel",o.searchQuery),t.xp6(2),t.Q6J("ngForOf",t.xi3(12,4,o.institutes,o.searchQuery)),t.xp6(2),t.Q6J("currentPage",o.currentPage)("totalPages",o.totalPages))},dependencies:[i.ez,i.sg,i.O5,h.Q,r.u,u.u5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,l.fQ,l.lO,c.rH,v.H],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return s})(),E=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-mainn-institutes"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[i.ez,c.lC]})}return s})();var U=a(4286);function D(s,P){1&s&&(t.TgZ(0,"div",14),t._uU(1," \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628 "),t.qZA())}function y(s,P){1&s&&(t.TgZ(0,"div",14),t._uU(1," \u0627\u0644\u0648\u0635\u0641 \u0645\u0637\u0644\u0648\u0628 "),t.qZA())}function S(s,P){if(1&s&&(t.ynx(0),t.TgZ(1,"div",6)(2,"button",15),t._uU(3," \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0624\u0633\u0633\u0629 "),t.qZA()(),t.BQk()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.instituteForm.valid)}}function k(s,P){if(1&s){const e=t.EpF();t.TgZ(0,"div",6)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateInstitute())}),t._uU(2," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.instituteForm.valid)}}let T=(()=>{class s{constructor(e,n,o,p,m,x,O){this.instituteService=e,this.localize=n,this.router=o,this.activatedRoute=p,this._MessagesService=m,this.blogService=x,this.fb=O,this.isEditMode=!1,this.instituteId="",this.instituteForm=this.fb.group({name:["",u.kI.required],description:["",u.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{const n=e.get("id");n?(this.instituteId=n,this.isEditMode=!0,this.instituteService.GetInstituteById(n).subscribe(o=>{o&&o.data&&this.setFormValues(o.data)})):this.blogService.initializeNavItems()})}setFormValues(e){this.instituteForm.controls.name.setValue(e.name),this.instituteForm.controls.description.setValue(e.description)}get f(){return this.instituteForm.controls}navigateToInstitutesList(){const e=this.localize.translateRoute("/dashboard/institutes");this.router.navigate([e])}updateInstitute(){this.instituteForm.valid&&this.instituteService.UpdateInstitute(this.instituteId,{name:this.instituteForm.controls.name.value,description:this.instituteForm.controls.description.value,_method:"PATCH"}).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",3e3),this.navigateToInstitutesList()},error:n=>{console.error("Failed to edit institute:",n)}})}onSubmit(){this.instituteForm.valid&&this.instituteService.AddInstitute({name:this.instituteForm.controls.name.value,description:this.instituteForm.controls.description.value}).subscribe({next:n=>{this.navigateToInstitutesList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:n=>{console.error("Failed to add institute:",n)}})}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(b),t.Y36(l.An),t.Y36(c.F0),t.Y36(c.gz),t.Y36(U.K),t.Y36(g.Q),t.Y36(u.qu))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-institutes"]],standalone:!0,features:[t.jDz],decls:20,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addInistitutes","role","tabpanel","aria-labelledby","addInistitutes-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-12","mb-3"],["for","addInstituteName",1,"form-label"],["type","text","name","name","id","addInstituteName","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","addInstituteDesciption",1,"form-label"],["name","description","id","addInstituteDesciption","cols","30","rows","10","formControlName","description",1,"form-control"],[4,"ngIf","ngIfElse"],["editButton",""],[1,"text-danger"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0624\u0633\u0633\u0629*"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,D,2,0,"div",9),t.qZA(),t.TgZ(12,"div",6)(13,"label",10),t._uU(14,"\u0627\u0644\u0648\u0635\u0641"),t.qZA(),t._UZ(15,"textarea",11),t.YNc(16,y,2,0,"div",9),t.qZA()(),t.YNc(17,S,4,1,"ng-container",12),t.YNc(18,k,3,1,"ng-template",null,13,t.W1O),t.qZA()()()()()()),2&n){const p=t.MAs(19);t.xp6(5),t.Q6J("formGroup",o.instituteForm),t.xp6(6),t.Q6J("ngIf",o.instituteForm.controls.name.invalid&&(o.instituteForm.controls.name.dirty||o.instituteForm.controls.name.touched)),t.xp6(5),t.Q6J("ngIf",o.instituteForm.controls.description.invalid&&(o.instituteForm.controls.description.dirty||o.instituteForm.controls.description.touched)),t.xp6(1),t.Q6J("ngIf",!o.isEditMode)("ngIfElse",p)}},dependencies:[i.ez,i.O5,u.UX,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,u.u5],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:not(.d-inline-block){border:1px solid var(--main);color:var(--dashboard1);width:100%;border-radius:10px}"]})}return s})();const N=[{path:"",component:E,children:[{path:"",component:L},{path:"add-institute",component:T,data:{breadcrumbs:[{label:" \u0625\u0636\u0627\u0641\u0629 \u0645\u0624\u0633\u0633\u0629",url:"/dashboard/categories/add-category"}]}},{path:"add-institute/:id",component:T}]}]},8034:(I,C,a)=>{a.d(C,{$:()=>l});var i=a(6814),_=a(7700),h=a(2296),r=a(5879),u=a(4286);let l=(()=>{class c{constructor(t,g,d){this.dialogRef=t,this.data=g,this._MessagesService=d}onConfirmClick(){this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("Done",3e3)}onCancelClick(){this.dialogRef.close(!1)}static#t=this.\u0275fac=function(g){return new(g||c)(r.Y36(_.so),r.Y36(_.WI),r.Y36(u.K))};static#e=this.\u0275cmp=r.Xpm({type:c,selectors:[["app-confirm-dialog"]],standalone:!0,features:[r.jDz],decls:10,vars:2,consts:[[1,"text-center"],["mat-dialog-title","",1,"text-center"],[1,"m-auto"],["mat-button","",3,"click"],["mat-button","","olor","primary",2,"color","red",3,"click"]],template:function(g,d){1&g&&(r.TgZ(0,"div",0)(1,"h2",1),r._uU(2),r.qZA(),r.TgZ(3,"mat-dialog-content"),r._uU(4),r.qZA(),r.TgZ(5,"mat-dialog-actions",2)(6,"button",3),r.NdJ("click",function(){return d.onCancelClick()}),r._uU(7,"\u0627\u0644\u063a\u0627\u0621"),r.qZA(),r.TgZ(8,"button",4),r.NdJ("click",function(){return d.onConfirmClick()}),r._uU(9," \u062a\u0627\u0643\u064a\u062f "),r.qZA()()()),2&g&&(r.xp6(2),r.Oqu(d.data.title),r.xp6(2),r.Oqu(d.data.message))},dependencies:[i.ez,_.Is,_.uh,_.xY,_.H8,h.ot,h.lW],styles:["mat-dialog-content[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}return c})()},6996:(I,C,a)=>{a.d(C,{f:()=>h});var i=a(5619),_=a(5879);let h=(()=>{class r{constructor(){this.navItemsSubject=new i.X([]),this.navItems$=this.navItemsSubject.asObservable()}setNavItems(l){this.navItemsSubject.next(l)}static#t=this.\u0275fac=function(c){return new(c||r)};static#e=this.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},1818:(I,C,a)=>{a.d(C,{Q:()=>c});var i=a(5879),_=a(6223),h=a(6814);function r(v,t){if(1&v){const g=i.EpF();i.TgZ(0,"li",2)(1,"a",7),i.NdJ("click",function(){const b=i.CHM(g).index,M=i.oxw();return i.KtG(M.navigateTo(b+1))}),i._uU(2),i.qZA()()}if(2&v){const g=t.index,d=i.oxw();i.ekj("active",d.currentPage===g+1),i.xp6(2),i.Oqu(g+1)}}const u=function(){return[]},l={provide:_.JU,useExisting:(0,i.Gpc)(()=>c),multi:!0};let c=(()=>{class v{constructor(){this.pageChange=new i.vpe}navigateTo(g){this.pageChange.emit(g),this.scrollToTop()}ngOnInit(){}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}static#t=this.\u0275fac=function(d){return new(d||v)};static#e=this.\u0275cmp=i.Xpm({type:v,selectors:[["pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[i._Bn([l]),i.jDz],decls:11,vars:6,consts:[["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item","mx-2"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item mx-2",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"]],template:function(d,f){1&d&&(i.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),i.NdJ("click",function(){return f.navigateTo(f.currentPage-1)}),i.TgZ(4,"span",4),i._uU(5,"\xab"),i.qZA()()(),i.YNc(6,r,3,3,"li",5),i.TgZ(7,"li",2)(8,"a",6),i.NdJ("click",function(){return f.navigateTo(f.currentPage+1)}),i.TgZ(9,"span",4),i._uU(10,"\xbb"),i.qZA()()()()()),2&d&&(i.xp6(2),i.ekj("disabled",1===f.currentPage),i.xp6(4),i.Q6J("ngForOf",i.DdM(5,u).constructor(f.totalPages)),i.xp6(1),i.ekj("disabled",f.currentPage===f.totalPages))},dependencies:[h.ez,h.sg],styles:[".pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return v})()}}]);