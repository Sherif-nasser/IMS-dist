"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[20],{5020:(Q,h,r)=>{r.r(h),r.d(h,{default:()=>S});var c=r(6814),s=r(6223),p=r(8525),v=r(4170),i=r(5879),m=r(8733),u=r(846),f=r(4286),g=r(9409),b=r(3680);function D(n,l){1&n&&(i.TgZ(0,"div",19),i._uU(1," \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628 "),i.qZA())}function F(n,l){1&n&&(i.TgZ(0,"div",19),i._uU(1," \u0627\u0644\u0648\u0635\u0641 \u0645\u0637\u0644\u0648\u0628 "),i.qZA())}function A(n,l){if(1&n&&(i.TgZ(0,"mat-option",15),i._uU(1),i.qZA()),2&n){const t=l.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.name," ")}}function Z(n,l){if(1&n&&(i.ynx(0),i.TgZ(1,"div",10)(2,"button",20),i._uU(3," \u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645 "),i.qZA()(),i.BQk()),2&n){const t=i.oxw();i.xp6(2),i.Q6J("disabled",!t.divisionForm.valid)}}function C(n,l){if(1&n){const t=i.EpF();i.TgZ(0,"div",10)(1,"button",21),i.NdJ("click",function(){i.CHM(t);const e=i.oxw();return i.KtG(e.updateDivision())}),i._uU(2," \u062a\u0639\u062f\u064a\u0644 "),i.qZA()()}if(2&n){const t=i.oxw();i.xp6(1),i.Q6J("disabled",!t.divisionForm.valid)}}let _=(()=>{class n{constructor(t,o,e,a,d){this.localize=t,this.router=o,this.activatedRoute=e,this._MessagesService=a,this.divisionService=d,this.isEditMode=!1,this.divisionId="",this.divisionsOptions=[],this.divisionForm=new s.cw({name:new s.NI("",s.kI.required),description:new s.NI("",s.kI.required),parant_id:new s.NI(null)})}ngOnInit(){this.getListDivisions(),this.activatedRoute.paramMap.subscribe(t=>{const o=t.get("id");o&&(this.divisionId=o,this.isEditMode=!0,this.divisionService.getDivisionById(o).subscribe(e=>{e&&e.data&&this.setFormValues(e.data)}))})}getListDivisions(){this.divisionService.getDivisionsList().subscribe({next:t=>{this.divisionsOptions=t.data.data,this.divisionsOptions&&this.divisionsOptions.length>0&&(this.divisionsOptions=this.divisionsOptions.filter(o=>o.id!=this.divisionId))},error:t=>{console.error("There was an error!",t)}})}navigateToDivisionsList(){const t=this.localize.translateRoute("/dashboard/divisions");this.router.navigate([t])}setFormValues(t){this.divisionForm.controls.name.setValue(t.name),this.divisionForm.controls.description.setValue(t.description),this.divisionForm.controls.parant_id.setValue(t.parant_id)}updateDivision(){this.divisionForm.valid&&this.divisionService.updateDivision(this.divisionId,{name:this.divisionForm.controls.name.value||"",description:this.divisionForm.controls.description.value||"",parant_id:this.divisionForm.controls.parant_id.value||null,_method:"PATCH"}).subscribe({next:o=>{this.navigateToDivisionsList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to update division:",o)}})}onSubmit(){this.divisionForm.valid&&this.divisionService.addDivision({name:this.divisionForm.controls.name.value||"",description:this.divisionForm.controls.description.value||"",parant_id:this.divisionForm.controls.parant_id.value||null}).subscribe({next:o=>{this.navigateToDivisionsList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to add division:",o)}})}static#i=this.\u0275fac=function(o){return new(o||n)(i.Y36(m.An),i.Y36(u.F0),i.Y36(u.gz),i.Y36(f.K),i.Y36(g.E))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-add-division"]],standalone:!0,features:[i.jDz],decls:28,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addDivision","role","tabpanel","aria-labelledby","addDivision-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-md-6","mb-3"],["for","name",1,"form-label"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-group","col-12","mb-3"],["for","description",1,"form-label"],["name","description","id","description","cols","30","rows","10","formControlName","description",1,"form-control"],["appearance","fill",1,"w-100"],["formControlName","parant_id"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["editButton",""],[1,"text-danger"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5","edi-btn",3,"disabled","click"]],template:function(o,e){if(1&o&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),i.NdJ("ngSubmit",function(){return e.onSubmit()}),i.TgZ(6,"div",1)(7,"div",6)(8,"label",7),i._uU(9,"\u0627\u0644\u0627\u0633\u0645*"),i.qZA(),i._UZ(10,"input",8),i.YNc(11,D,2,0,"div",9),i.qZA(),i.TgZ(12,"div",10)(13,"label",11),i._uU(14,"\u0627\u0644\u0648\u0635\u0641*"),i.qZA(),i._UZ(15,"textarea",12),i.YNc(16,F,2,0,"div",9),i.qZA(),i.TgZ(17,"div",10)(18,"mat-form-field",13)(19,"mat-label"),i._uU(20,"\u0627\u0644\u062a\u0635\u0646\u064a\u0641\u0627\u062a"),i.qZA(),i.TgZ(21,"mat-select",14)(22,"mat-option",15),i._uU(23,"\u0628\u062f\u0648\u0646"),i.qZA(),i.YNc(24,A,2,2,"mat-option",16),i.qZA()()()(),i.YNc(25,Z,4,1,"ng-container",17),i.YNc(26,C,3,1,"ng-template",null,18,i.W1O),i.qZA()()()()()()),2&o){const a=i.MAs(27);i.xp6(5),i.Q6J("formGroup",e.divisionForm),i.xp6(6),i.Q6J("ngIf",e.divisionForm.controls.name.invalid&&(e.divisionForm.controls.name.dirty||e.divisionForm.controls.name.touched)),i.xp6(5),i.Q6J("ngIf",e.divisionForm.controls.description.invalid&&(e.divisionForm.controls.description.dirty||e.divisionForm.controls.description.touched)),i.xp6(6),i.Q6J("value",null),i.xp6(2),i.Q6J("ngForOf",e.divisionsOptions),i.xp6(1),i.Q6J("ngIf",!e.isEditMode)("ngIfElse",a)}},dependencies:[c.ez,c.sg,c.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.LD,v.KE,v.hX,p.gD,b.ey,v.lN],styles:[".edi-btn[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}"]})}return n})();var x=r(8034),T=r(1818),y=r(2135),w=r(7700);const I=function(n,l){return[n,l]};function L(n,l){if(1&n){const t=i.EpF();i.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),i.NdJ("click",function(){const a=i.CHM(t).$implicit,d=i.oxw();return i.KtG(d.viewDivision(a))}),i.TgZ(5,"a",17)(6,"h3",18),i._uU(7),i.qZA(),i.TgZ(8,"h4",18),i._uU(9),i.qZA()()(),i.TgZ(10,"div",19)(11,"a",20),i.ALo(12,"localize"),i._uU(13,"\u062a\u0639\u062f\u064a\u0644"),i.qZA(),i.TgZ(14,"button",21),i.NdJ("click",function(){const a=i.CHM(t).$implicit,d=i.oxw();return i.KtG(d.deleteDivision(a.id,a.name))}),i._uU(15," \u062d\u0630\u0641 "),i.qZA()()()()()()}if(2&n){const t=l.$implicit;i.xp6(7),i.hij(" ",t.name," "),i.xp6(2),i.hij(" ",t.description," "),i.xp6(2),i.Q6J("routerLink",i.WLB(5,I,i.lcZ(12,3,"/dashboard/divisions/edit-division"),t.id))}}function J(n,l){1&n&&(i.TgZ(0,"div",22)(1,"p"),i._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),i.qZA()())}let O=(()=>{class n{constructor(t,o,e,a){this.divisionService=t,this.router=o,this.localize=e,this.dialog=a,this.divisions=[],this.rolesDropDown=[],this.searchQuery="",this.loading=!0}ngOnInit(){this.getListDivisions(),this.divisionService.initializeNavItems()}getListDivisions(t=1){this.loading=!0,this.divisionService.getDivisionsList({page:t}).subscribe({next:o=>{this.divisions=o.data.data,this.currentPage=o.data.current_page,this.totalPages=o.data.last_page,this.loading=!1},error:o=>{this.loading=!1,console.error("There was an error!",o)}})}deleteDivision(t,o){this.dialog.open(x.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${o} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(a=>{a&&this.divisionService.deleteDivision(t.toString()).subscribe({next:d=>{this.getListDivisions()},error:d=>{console.error("There was an error deleting the division!",d)}})})}navigateToAddDivisions(){const t=this.localize.translateRoute("/dashboard/divisions/add-divisions");this.router.navigate([t])}viewDivision(t){if(t){const o=this.localize.translateRoute("/dashboard/divisions/view-division");this.router.navigate([o,t.id])}else console.error("No division to view")}onPageChange(t){this.getListDivisions(t)}static#i=this.\u0275fac=function(o){return new(o||n)(i.Y36(g.E),i.Y36(u.F0),i.Y36(m.An),i.Y36(w.uw))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-divisions-list"]],standalone:!0,features:[i.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs"],["action","",1,"mb-4","filterForm"],[1,"col-lg-4","col-md-6","mb-lg-0","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","searchContracts","id","searchContracts","placeholder","\u0628\u062d\u062b...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-2"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-7","col-md-8","order-md-1","order-2",2,"cursor","pointer",3,"click"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"col-xl-5","col-md-4","order-md-2","order-1","mb-md-0","mb-2","text-end"],[1,"btn","px-4","mx-1","edit",3,"routerLink"],[1,"btn","delete","px-4",3,"click"],[1,"text-center"]],template:function(o,e){1&o&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),i._UZ(8,"i",7),i.qZA(),i.TgZ(9,"input",8),i.NdJ("ngModelChange",function(d){return e.searchQuery=d}),i.qZA()()()()(),i.TgZ(10,"div",1),i.YNc(11,L,16,8,"div",9),i.ALo(12,"filter"),i.YNc(13,J,3,0,"div",10),i.ALo(14,"filter"),i.qZA(),i.TgZ(15,"pagination",11),i.NdJ("pageChange",function(d){return e.onPageChange(d)}),i.qZA()()()()),2&o&&(i.xp6(9),i.Q6J("ngModel",e.searchQuery),i.xp6(2),i.Q6J("ngForOf",i.xi3(12,5,e.divisions,e.searchQuery)),i.xp6(2),i.Q6J("ngIf",0===i.xi3(14,8,e.divisions,e.searchQuery).length&&!e.loading),i.xp6(2),i.Q6J("currentPage",e.currentPage)("totalPages",e.totalPages))},dependencies:[c.ez,c.sg,c.O5,u.Bz,u.rH,m.fQ,m.lO,T.Q,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,y.u],styles:[".tabs[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a;color:var(--dashboard1)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}a.show[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}"]})}return n})();function N(n,l){if(1&n&&(i.TgZ(0,"mat-option",14),i._uU(1),i.qZA()),2&n){const t=l.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.name," ")}}const S=[{path:"",component:(()=>{class n{static#i=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-main-divisions"]],standalone:!0,features:[i.jDz],decls:1,vars:0,template:function(o,e){1&o&&i._UZ(0,"router-outlet")},dependencies:[c.ez,u.lC]})}return n})(),children:[{path:"",component:O},{path:"add-division",component:_},{path:"edit-division/:id",component:_},{path:"view-division/:id",component:(()=>{class n{constructor(t,o,e,a,d){this.localize=t,this.router=o,this.activatedRoute=e,this._MessagesService=a,this.divisionService=d,this.isEditMode=!1,this.divisionId="",this.divisionsOptions=[],this.divisionForm=new s.cw({name:new s.NI("",s.kI.required),description:new s.NI("",s.kI.required),parant_id:new s.NI({value:null,disabled:!0})})}ngOnInit(){this.getListDivisions(),this.activatedRoute.paramMap.subscribe(t=>{const o=t.get("id");o&&(this.divisionId=o,this.isEditMode=!0,this.divisionService.getDivisionById(o).subscribe(e=>{e&&e.data&&this.setFormValues(e.data)}))})}getListDivisions(){this.divisionService.getDivisionsList().subscribe({next:t=>{this.divisionsOptions=t.data.data,this.divisionsOptions&&this.divisionsOptions.length>0&&(this.divisionsOptions=this.divisionsOptions.filter(o=>o.id!=this.divisionId))},error:t=>{console.error("There was an error!",t)}})}navigateToDivisionsList(){const t=this.localize.translateRoute("/dashboard/divisions");this.router.navigate([t])}setFormValues(t){this.divisionForm.controls.name.setValue(t.name),this.divisionForm.controls.description.setValue(t.description),this.divisionForm.controls.parant_id.setValue(t.parant_id)}updateDivision(){this.divisionForm.valid&&this.divisionService.updateDivision(this.divisionId,{name:this.divisionForm.controls.name.value||"",description:this.divisionForm.controls.description.value||"",parant_id:this.divisionForm.controls.parant_id.value||null,_method:"PATCH"}).subscribe({next:o=>{this.navigateToDivisionsList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to update division:",o)}})}static#i=this.\u0275fac=function(o){return new(o||n)(i.Y36(m.An),i.Y36(u.F0),i.Y36(u.gz),i.Y36(f.K),i.Y36(g.E))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-add-division"]],standalone:!0,features:[i.jDz],decls:23,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addDivision","role","tabpanel","aria-labelledby","addDivision-tab","tabindex","0",1,""],[3,"formGroup"],[1,"form-group","col-md-6","mb-3"],["for","name",1,"form-label"],["type","text","name","name","id","name","formControlName","name","readonly","",1,"form-control"],[1,"form-group","col-12","mb-3"],["for","description",1,"form-label"],["name","description","id","description","cols","30","rows","10","formControlName","description","readonly","",1,"form-control"],["appearance","fill",1,"w-100"],["formControlName","parant_id",3,"disabled"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(o,e){1&o&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),i._uU(9,"\u0627\u0644\u0627\u0633\u0645*"),i.qZA(),i._UZ(10,"input",8),i.qZA(),i.TgZ(11,"div",9)(12,"label",10),i._uU(13,"\u0627\u0644\u0648\u0635\u0641*"),i.qZA(),i._UZ(14,"textarea",11),i.qZA(),i.TgZ(15,"div",9)(16,"mat-form-field",12)(17,"mat-label"),i._uU(18,"\u0627\u0644\u062a\u0635\u0646\u064a\u0641\u0627\u062a"),i.qZA(),i.TgZ(19,"mat-select",13)(20,"mat-option",14),i._uU(21,"\u0628\u062f\u0648\u0646"),i.qZA(),i.YNc(22,N,2,2,"mat-option",15),i.qZA()()()()()()()()()()),2&o&&(i.xp6(5),i.Q6J("formGroup",e.divisionForm),i.xp6(14),i.Q6J("disabled",!0),i.xp6(1),i.Q6J("value",null),i.xp6(2),i.Q6J("ngForOf",e.divisionsOptions))},dependencies:[c.ez,c.sg,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.LD,v.KE,v.hX,p.gD,b.ey,v.lN]})}return n})()}]}]}}]);