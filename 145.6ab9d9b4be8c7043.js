"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[145],{4145:(Si,dt,h)=>{h.r(dt),h.d(dt,{default:()=>wi});var f=h(6814),v=h(846),e=h(5879);let Xt=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-main-corporates"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},dependencies:[f.ez,v.lC]})}return s})();var p=h(6223),te=h(2135),w=h(8733),ee=h(1818),ie=h(8034),D=h(9862),y=h(553),ht=h(6996);let G=(()=>{class s{constructor(t,i){this.http=t,this.navService=i,this.corporateListUrl=`${y.N.elitersUrl}corporates`,this.updateCorporateUrl=`${y.N.elitersUrl}corporate/update`,this.updateCorporateDocumentUrl=`${y.N.elitersUrl}corporate-document/update-status`,this.showCorporateUrl=`${y.N.elitersUrl}corporate/show`,this.deleteCorporateUrl=`${y.N.elitersUrl}corporate/delete`}initializeNavItems(){this.navService.setNavItems([{name:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0631\u0643\u0627\u062a",routerLink:"/dashboard/corporates"}])}getCorporatesList(t){let i=new D.LE;return t&&Object.keys(t).forEach(n=>{i=i.append(n,t[n])}),this.http.get(this.corporateListUrl,{params:i})}GetCorporateById(t,i){let n=new D.LE;return i&&Object.keys(i).forEach(r=>{n=n.append(r,i[r])}),this.http.get(this.showCorporateUrl,{params:n})}AddCorporate(t,i){let n=new D.LE;i&&Object.keys(i).forEach(a=>{n=n.append(a,i[a])});const r=new FormData;return Object.keys(t).forEach(a=>{Array.isArray(t[a])?t[a].forEach((l,c)=>{r.append(`${a}[${c}]`,l)}):r.append(a,t[a])}),this.http.post(this.updateCorporateUrl,r,{params:n})}UpdateCorporate(t,i,n){let r=new D.LE;n&&Object.keys(n).forEach(l=>{r=r.append(l,n[l])});const a=new FormData;return Object.keys(i).forEach(l=>{Array.isArray(i[l])?i[l].forEach((c,d)=>{a.append(`${l}[${d}]`,c)}):a.append(l,i[l])}),this.http.post(this.updateCorporateUrl,a,{params:r})}DeleteCorporate(t,i){const n=new FormData;return Object.keys(i).forEach(r=>{Array.isArray(i[r])?i[r].forEach((a,l)=>{n.append(`${r}[${l}]`,a)}):n.append(r,i[r])}),this.http.post(this.deleteCorporateUrl,n)}listCorporateDocumentsByCorporateID(t){return this.http.get(`${y.N.elitersUrl}list-corporate-documents-by-corporateID?corporate_id=${t}`)}updateCorporateDocument(t,i){let n=new D.LE;i&&Object.keys(i).forEach(a=>{n=n.append(a,i[a])});const r=new FormData;return Object.keys(t).forEach(a=>{Array.isArray(t[a])?t[a].forEach((l,c)=>{r.append(`${a}[${c}]`,l)}):r.append(a,t[a])}),this.http.post(this.updateCorporateDocumentUrl,r,{params:n})}static#t=this.\u0275fac=function(i){return new(i||s)(e.LFG(D.eN),e.LFG(ht.f))};static#e=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var B=h(7700),L=h(4286);const ne=function(s,o){return[s,o]},oe=function(s){return{color:s}};function se(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),e._UZ(4,"img",16),e.qZA(),e.TgZ(5,"div",17)(6,"div",18)(7,"div",1)(8,"div",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.viewCorporate(r))}),e.TgZ(9,"h4",20),e._uU(10),e.qZA()(),e.TgZ(11,"div",21)(12,"a",22),e.ALo(13,"localize"),e._uU(14,"\u0645\u0631\u0627\u062c\u0639\u0629"),e.qZA()()(),e.TgZ(15,"ul")(16,"li"),e._uU(17),e.qZA(),e.TgZ(18,"li"),e._uU(19),e.qZA(),e.TgZ(20,"li"),e._uU(21," \u0627\u0644\u062d\u0627\u0644\u0629:"),e.TgZ(22,"span",23),e._uU(23),e.qZA()()()()()()()()}if(2&s){const t=o.$implicit;e.xp6(4),e.Q6J("src",t.logo,e.LSH)("alt",t.name+" Article Image"),e.xp6(6),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("routerLink",e.WLB(10,ne,e.lcZ(13,8,"/dashboard/corporates/add-corporate"),t.id)),e.xp6(5),e.hij("\u0627\u0644\u0628\u0644\u062f: ",t.country,""),e.xp6(2),e.hij("\u0627\u0644\u0645\u062f\u064a\u0646\u0629: ",t.city,""),e.xp6(3),e.Q6J("ngStyle",e.VKq(13,oe,"Active"!==t.status?"red":"green")),e.xp6(1),e.hij(" ",t.status,"")}}function re(s,o){1&s&&(e.TgZ(0,"div",24)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}let ae=(()=>{class s{constructor(t,i,n,r,a){this.router=t,this.localize=i,this.corporateService=n,this.dialog=r,this._MessagesService=a,this.loading=!1,this.corporatesList=[],this.searchQuery=""}ngOnInit(){this.getCorporatesList(),this.prepareNavBar()}prepareNavBar(){this.corporateService.initializeNavItems()}getCorporatesList(t=1){this.loading=!0,this.corporateService.getCorporatesList({page:t}).subscribe({next:i=>{this.currentPage=i.pagination.current_page,this.totalPages=i.pagination.last_page,this.corporatesList=i.data,this.loading=!1}})}updateCorporate(t){if(t){const i={phone:t.phone,corporate_id:t.id,name:t.name,tax_register:t.tax_register,commercial_record:t.commercial_record,country:t.country,city:t.city,address:t.address,logo:t.logo,password:t.password,email:t.email,status:"Active",owner_title:t.owner_title};delete i.logo,this.corporateService.UpdateCorporate(t.id,i).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.getCorporatesList()},error:n=>{console.error("Failed to update corporate:",n)}})}}onPageChange(t){this.getCorporatesList(t)}viewCorporate(t){if(t){const i=this.localize.translateRoute("/dashboard/corporates/view-corporate");this.router.navigate([i,t.id])}}acceptCompany(t){this.updateCorporate(t)}deleteCorporate(t,i){const n={corporate_id:t};this.dialog.open(ie.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${i} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(a=>{a&&this.corporateService.DeleteCorporate(t.toString(),n).subscribe({next:l=>{this.getCorporatesList()},error:l=>{console.error("There was an error deleting the admin!",l)}})})}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(v.F0),e.Y36(w.An),e.Y36(G),e.Y36(B.uw),e.Y36(L.K))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-corporates-list"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-2","filterForm"],[1,"col-lg-7","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"row","g-0","align-items-center"],[1,"col-md-3","p-2","text-center"],[1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"col-md-9"],[1,"card-body"],[1,"col-md-6","order-md-1","order-2",2,"cursor","pointer",3,"click"],[1,"card-title"],[1,"col-md-6","order-md-2","order-1","mb-md-0","mb-2","text-end"],[1,"btn","mx-2","px-4","edit",3,"routerLink"],[3,"ngStyle"],[1,"text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(a){return n.searchQuery=a}),e.qZA()()()()(),e.TgZ(10,"div",1),e.YNc(11,se,24,15,"div",9),e.ALo(12,"filter"),e.YNc(13,re,3,0,"div",10),e.ALo(14,"filter"),e.qZA(),e.TgZ(15,"pagination",11),e.NdJ("pageChange",function(a){return n.onPageChange(a)}),e.qZA()()()()),2&i&&(e.xp6(9),e.Q6J("ngModel",n.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,5,n.corporatesList,n.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(14,8,n.corporatesList,n.searchQuery).length&&!n.loading),e.xp6(2),e.Q6J("currentPage",n.currentPage)("totalPages",n.totalPages))},dependencies:[f.ez,f.sg,f.O5,f.PC,p.u5,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,te.u,v.Bz,v.rH,w.fQ,w.lO,ee.Q],styles:[".tabs[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a;color:var(--dashboard1)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}a.show[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return s})();var pt=h(8337),g=h(2495),m=h(8645),S=h(7394);let le=0;const Q=new e.OlP("CdkAccordion");let ce=(()=>{class s{constructor(){this._stateChanges=new m.x,this._openCloseAllActions=new m.x,this.id="cdk-accordion-"+le++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=(0,g.Ig)(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275dir=e.lG2({type:s,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[e._Bn([{provide:Q,useExisting:s}]),e.TTD]})}return s})(),de=0,he=(()=>{class s{get expanded(){return this._expanded}set expanded(t){t=(0,g.Ig)(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t)}constructor(t,i,n){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=n,this._openCloseAllSubscription=S.w0.EMPTY,this.closed=new e.vpe,this.opened=new e.vpe,this.destroyed=new e.vpe,this.expandedChange=new e.vpe,this.id="cdk-accordion-child-"+de++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((r,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==r&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(Q,12),e.Y36(e.sBO),e.Y36(pt.A8))};static#e=this.\u0275dir=e.lG2({type:s,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[e._Bn([{provide:Q,useValue:void 0}])]})}return s})(),pe=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({})}return s})();var $=h(8484),j=h(3680),F=h(4300),ue=h(3997),O=h(7921),Z=h(2181),V=h(8180),K=h(6028),ge=h(6232),N=h(3019),b=h(6825);const me=["body"];function _e(s,o){}const fe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ve=["mat-expansion-panel-header","*","mat-action-row"];function be(s,o){if(1&s&&e._UZ(0,"span",2),2&s){const t=e.oxw();e.Q6J("@indicatorRotate",t._getExpandedState())}}const xe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Ce=["mat-panel-title","mat-panel-description","*"],W=new e.OlP("MAT_ACCORDION"),ut="225ms cubic-bezier(0.4,0.0,0.2,1)",gt={indicatorRotate:(0,b.X$)("indicatorRotate",[(0,b.SB)("collapsed, void",(0,b.oB)({transform:"rotate(0deg)"})),(0,b.SB)("expanded",(0,b.oB)({transform:"rotate(180deg)"})),(0,b.eR)("expanded <=> collapsed, void => collapsed",(0,b.jt)(ut))]),bodyExpansion:(0,b.X$)("bodyExpansion",[(0,b.SB)("collapsed, void",(0,b.oB)({height:"0px",visibility:"hidden"})),(0,b.SB)("expanded",(0,b.oB)({height:"*",visibility:""})),(0,b.eR)("expanded <=> collapsed, void => collapsed",(0,b.jt)(ut))])},mt=new e.OlP("MAT_EXPANSION_PANEL");let De=(()=>{class s{constructor(t,i){this._template=t,this._expansionPanel=i}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(e.Rgc),e.Y36(mt,8))};static#e=this.\u0275dir=e.lG2({type:s,selectors:[["ng-template","matExpansionPanelContent",""]]})}return s})(),ye=0;const _t=new e.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let ft=(()=>{class s extends he{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=(0,g.Ig)(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,n,r,a,l,c){super(t,i,n),this._viewContainerRef=r,this._animationMode=l,this._hideToggle=!1,this.afterExpand=new e.vpe,this.afterCollapse=new e.vpe,this._inputChanges=new m.x,this._headerId="mat-expansion-panel-header-"+ye++,this._bodyAnimationDone=new m.x,this.accordion=t,this._document=a,this._bodyAnimationDone.pipe((0,ue.x)((d,u)=>d.fromState===u.fromState&&d.toState===u.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe((0,O.O)(null),(0,Z.h)(()=>this.expanded&&!this._portal),(0,V.q)(1)).subscribe(()=>{this._portal=new $.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(W,12),e.Y36(e.sBO),e.Y36(pt.A8),e.Y36(e.s_b),e.Y36(f.K0),e.Y36(e.QbO,8),e.Y36(_t,8))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["mat-expansion-panel"]],contentQueries:function(i,n,r){if(1&i&&e.Suo(r,De,5),2&i){let a;e.iGM(a=e.CRH())&&(n._lazyContent=a.first)}},viewQuery:function(i,n){if(1&i&&e.Gf(me,5),2&i){let r;e.iGM(r=e.CRH())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,n){2&i&&e.ekj("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[e._Bn([{provide:W,useValue:void 0},{provide:mt,useExisting:s}]),e.qOj,e.TTD],ngContentSelectors:ve,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,n){1&i&&(e.F$t(fe),e.Hsn(0),e.TgZ(1,"div",0,1),e.NdJ("@bodyExpansion.done",function(a){return n._bodyAnimationDone.next(a)}),e.TgZ(3,"div",2),e.Hsn(4,1),e.YNc(5,_e,0,0,"ng-template",3),e.qZA(),e.Hsn(6,2),e.qZA()),2&i&&(e.xp6(1),e.Q6J("@bodyExpansion",n._getExpandedState())("id",n.id),e.uIk("aria-labelledby",n._headerId),e.xp6(4),e.Q6J("cdkPortalOutlet",n._portal))},dependencies:[$.Pl],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[gt.bodyExpansion]},changeDetection:0})}return s})();class we{}const Pe=(0,j.sb)(we);let vt=(()=>{class s extends Pe{constructor(t,i,n,r,a,l,c){super(),this.panel=t,this._element=i,this._focusMonitor=n,this._changeDetectorRef=r,this._animationMode=l,this._parentChangeSubscription=S.w0.EMPTY;const d=t.accordion?t.accordion._stateChanges.pipe((0,Z.h)(u=>!(!u.hideToggle&&!u.togglePosition))):ge.E;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=(0,N.T)(t.opened,t.closed,d,t._inputChanges.pipe((0,Z.h)(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe((0,Z.h)(()=>t._containsFocus())).subscribe(()=>n.focusVia(i,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case K.L_:case K.K5:(0,K.Vb)(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(ft,1),e.Y36(e.SBq),e.Y36(F.tE),e.Y36(e.sBO),e.Y36(_t,8),e.Y36(e.QbO,8),e.$8M("tabindex"))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,n){1&i&&e.NdJ("click",function(){return n._toggle()})("keydown",function(a){return n._keydown(a)}),2&i&&(e.uIk("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),e.Udp("height",n._getHeaderHeight()),e.ekj("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[e.qOj],ngContentSelectors:Ce,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,n){1&i&&(e.F$t(xe),e.TgZ(0,"span",0),e.Hsn(1),e.Hsn(2,1),e.Hsn(3,2),e.qZA(),e.YNc(4,be,1,1,"span",1)),2&i&&(e.ekj("mat-content-hide-toggle",!n._showToggle()),e.xp6(4),e.Q6J("ngIf",n._showToggle()))},dependencies:[f.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[gt.indicatorRotate]},changeDetection:0})}return s})(),Se=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275dir=e.lG2({type:s,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]})}return s})(),Ee=(()=>{class s extends ce{constructor(){super(...arguments),this._ownHeaders=new e.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=(0,g.Ig)(t)}ngAfterContentInit(){this._headers.changes.pipe((0,O.O)(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new F.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static#t=this.\u0275fac=function(){let t;return function(n){return(t||(t=e.n5z(s)))(n||s)}}();static#e=this.\u0275dir=e.lG2({type:s,selectors:[["mat-accordion"]],contentQueries:function(i,n,r){if(1&i&&e.Suo(r,vt,5),2&i){let a;e.iGM(a=e.CRH())&&(n._headers=a)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(i,n){2&i&&e.ekj("mat-accordion-multi",n.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[e._Bn([{provide:W,useExisting:s}]),e.qOj]})}return s})(),Me=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[f.ez,j.BQ,pe,$.eL]})}return s})();var U=h(4170),bt=h(2032),xt=h(8525),Ct=h(5123),Dt=h(9172);const Te=["fileInput"];function Ie(s,o){if(1&s&&e._UZ(0,"img",36),2&s){const t=e.oxw();e.Q6J("src",t.logoUrl,e.LSH)}}function Oe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"i",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeLogo())}),e.qZA()}}function Ae(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",38),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(12);return e.KtG(n.click())}),e._UZ(1,"i",39),e.qZA()}}function Re(s,o){if(1&s&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function ke(s,o){if(1&s&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Le(s,o){if(1&s&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Fe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openInNewWindow(n.value))}),e._uU(1," \u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641 "),e.qZA()}}function Ze(s,o){if(1&s&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Ne(s,o){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",44)(2,"div",45)(3,"div",46)(4,"mat-label"),e._uU(5),e.qZA()(),e.TgZ(6,"div",47)(7,"mat-form-field",48)(8,"input",49),e.NdJ("ngModelChange",function(n){const a=e.CHM(t).$implicit;return e.KtG(a.value=n)})("focus",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.checkIfUrl(r))}),e.qZA()(),e.YNc(9,Fe,2,0,"button",50),e.qZA()(),e.TgZ(10,"div",45)(11,"div",46)(12,"mat-label"),e._uU(13,"\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0644\u0641"),e.qZA()(),e.TgZ(14,"div",47)(15,"mat-form-field",48)(16,"mat-select",51),e.NdJ("ngModelChange",function(n){const a=e.CHM(t).$implicit;return e.KtG(a.status=n)})("selectionChange",function(n){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onStatusChange(a.id,n.value))}),e.YNc(17,Ze,2,2,"mat-option",23),e.qZA()()()()(),e.BQk()}if(2&s){const t=o.$implicit,i=e.oxw(2);e.xp6(5),e.Oqu(t.documentName),e.xp6(3),e.Q6J("ngModel",t.value),e.xp6(1),e.Q6J("ngIf",t.isUrl),e.xp6(7),e.Q6J("ngModel",t.status),e.xp6(1),e.Q6J("ngForOf",i.statuses)}}function Ue(s,o){if(1&s&&(e.TgZ(0,"div",41)(1,"mat-accordion")(2,"mat-expansion-panel",42)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5," \u0645\u0644\u0641\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"),e.qZA()(),e.YNc(6,Ne,18,5,"ng-container",43),e.qZA()()()),2&s){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.corporateDocuments)}}const He=function(s){return[s]};let qe=(()=>{class s{constructor(t,i,n,r,a,l,c,d){this.activatedRoute=t,this.corporatesService=i,this.fb=n,this.localize=r,this.router=a,this._MessagesService=l,this.employeesService=c,this.IMS=d,this.panelOpenState=!1,this.corporateId="",this.isEditMode=!1,this.selectedFile=null,this.logoUrl=null,this.countriesList=[],this.citiesList=[],this.corporateDocuments=[],this.statuses=[{id:1,name:"Under Review"},{id:2,name:"Approved"},{id:3,name:"Rejected"}],this.companyStatuses=[{id:1,name:"Active"},{id:2,name:"In Active"},{id:3,name:"Blocked"},{id:4,name:"Not Completed"},{id:5,name:"Under Review"}],this.addCorporateForm=this.fb.group({corporate_id:["",p.kI.required],name:["",p.kI.required],country_id:["",p.kI.required],city_id:["",p.kI.required],address:["",p.kI.required],logo:[null],phone:["",p.kI.required],email:["",[p.kI.required,p.kI.email]],status:["",p.kI.required]})}ngOnInit(){this.getCountriesList(),this.activatedRoute.paramMap.subscribe(t=>{const i=t.get("id");if(i){this.corporateId=i,this.isEditMode=!0;const n={corporate_id:i};this.getCorporateDocuments(i),this.corporatesService.GetCorporateById(i,n).subscribe(r=>{r&&r.data&&(this.corporateDetails=r.data,this.setFormValues(r.data))})}})}getCountriesList(){this.IMS.GetCountriesList().subscribe({next:t=>{this.countriesList=t.data.data},error:t=>{console.error("Failed to get countries:",t)}})}onCountryChange(t){const n=t.target.value,r=this.countriesList.find(a=>a.id==n);console.log(r),r&&(this.citiesList=r.city,console.log(this.citiesList))}checkIfUrl(t){t.isUrl=/^(http|https):\/\/[^\s$.?#].[^\s]*$/gm.test(t.value)}getCorporateDocuments(t){this.corporatesService.listCorporateDocumentsByCorporateID(t).subscribe(i=>{this.corporateDocuments=i.data.map(n=>({id:n.id,value:n.value,documentName:n.document.name,status:n.status})),console.log(this.corporateDocuments)})}onStatusChange(t,i){this.corporatesService.updateCorporateDocument({corporate_document_id:t,status:i}).subscribe({next:r=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0644\u0641",3e3)},error:r=>{console.error("Failed to update status:",r)}})}prepareNavBar(){this.corporatesService.initializeNavItems()}setFormValues(t){this.addCorporateForm.patchValue({corporate_id:t.id||"",name:t.name||"",country_id:t.country.id||"",city_id:t.city.id||"",address:t.address||"",phone:t.phone||"",email:t.email||"",status:t.status||""}),t.logo&&(this.logoUrl=t.logo),t.city&&this.citiesList.push(t.city),console.log(this.addCorporateForm.value)}openInNewWindow(t){window.open(t,"_blank")}removeLogo(){this.logoUrl=null,this.selectedFile=null}onFileChange(t){const i=t.target.files[0];if(i){this.selectedFile=i;const n=new FileReader;n.onload=r=>{this.logoUrl=r.target.result},n.readAsDataURL(i)}}updateCorporate(){if(this.addCorporateForm.valid){let t={};const i=this.addCorporateForm.value;console.log(i),null!=this.selectedFile?t={...i,logo:this.selectedFile?this.selectedFile:null}:(t={...i},delete t.logo),t.owner_title=this.corporateDetails.owner_title,this.corporatesService.UpdateCorporate(this.corporateId,t).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.navigateToCorporatesList()},error:n=>{console.error("Failed to update corporate:",n)}})}}navigateToCorporatesList(){const t=this.localize.translateRoute("/dashboard/corporates");this.router.navigate([t])}onSubmit(){this.addCorporateForm.valid&&this.isEditMode&&this.updateCorporate()}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(v.gz),e.Y36(G),e.Y36(p.qu),e.Y36(w.An),e.Y36(v.F0),e.Y36(L.K),e.Y36(Ct.M),e.Y36(Dt.K))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-corporate"]],viewQuery:function(i,n){if(1&i&&e.Gf(Te,5),2&i){let r;e.iGM(r=e.CRH())&&(n.fileInput=r.first)}},standalone:!0,features:[e.jDz],decls:57,vars:14,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addCorporates","role","tabpanel","aria-labelledby","addCorporates-tab","tabindex","0",1,"tab-pane","fade","show","active"],["action","",1,"addCorporateForm",3,"formGroup","ngSubmit"],[1,"row","g-0"],[1,"col-md-3","p-2","text-center","position-relative"],["class","img-fluid rounded-start","alt","Corporate Logo","style","height: 200px; object-fit: cover",3,"src",4,"ngIf"],["class","fa fa-times position-absolute","style","top: 10px; left: 10px; cursor: pointer",3,"click",4,"ngIf"],["class","img-fluid rounded-start d-flex justify-content-center align-items-center","style","\n                    height: 200px;\n                    background-color: #f0f0f0;\n                    cursor: pointer;\n                  ",3,"click",4,"ngIf"],["type","file","hidden","",3,"change"],["fileInput",""],[1,"col-md-9"],[1,"card-body"],[1,"col-12","mb-3","text-end"],[1,"btn","px-4","back",3,"routerLink"],[1,"form-group","col-12","mb-3"],["for","corporateName",1,"form-label"],["type","text","name","name","formControlName","name",1,"form-control"],[1,"form-group","col-md-6","mb-3"],["for","corporateStatus",1,"form-label"],["name","status","formControlName","status","id","corporateStatus",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","corporateCountry",1,"form-label"],["name","country_id","formControlName","country_id","id","corporateCountry",1,"form-select",3,"change"],["for","corporateCity",1,"form-label"],["name","city_id","formControlName","city_id","id","corporateCity",1,"form-select"],["for","corporatePhone",1,"form-label"],["type","text","name","phone","formControlName","phone",1,"form-control"],["for","corporateEmail",1,"form-label"],["type","email","name","email","formControlName","email",1,"form-control"],["for","corporateAddress",1,"form-label"],["name","address","formControlName","address","rows","3",1,"form-control"],["type","submit",1,"btn","px-5",3,"disabled"],["class","verification-section",4,"ngIf"],["alt","Corporate Logo",1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src"],[1,"fa","fa-times","position-absolute",2,"top","10px","left","10px","cursor","pointer",3,"click"],[1,"img-fluid","rounded-start","d-flex","justify-content-center","align-items-center",2,"height","200px","background-color","#f0f0f0","cursor","pointer",3,"click"],[1,"fa","fa-image","fa-2x"],[3,"value"],[1,"verification-section"],["expanded","true"],[4,"ngFor","ngForOf"],[1,"row","document-row"],[1,"row",2,"align-items","baseline"],[1,"col-12","col-md-4","col-lg-3"],[1,"col-12","col-md-7","col-lg-8"],[2,"width","100%"],["matInput","",3,"ngModel","ngModelChange","focus"],["class","btn btn-primary px-5 mb-2","mat-button","","matSuffix","",3,"click",4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],["mat-button","","matSuffix","",1,"btn","btn-primary","px-5","mb-2",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"div",6)(7,"div",7),e.YNc(8,Ie,1,1,"img",8),e.YNc(9,Oe,1,0,"i",9),e.YNc(10,Ae,2,0,"div",10),e.TgZ(11,"input",11,12),e.NdJ("change",function(a){return n.onFileChange(a)}),e.qZA()(),e.TgZ(13,"div",13)(14,"div",14)(15,"div",1)(16,"div",15)(17,"a",16),e.ALo(18,"localize"),e._uU(19,"\u0631\u062c\u0648\u0639"),e.qZA()()()()()(),e.TgZ(20,"div",1)(21,"div",17)(22,"label",18),e._uU(23,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629*"),e.qZA(),e._UZ(24,"input",19),e.qZA(),e.TgZ(25,"div",20)(26,"label",21),e._uU(27,"\u0627\u0644\u062d\u0627\u0644\u0629*"),e.qZA(),e.TgZ(28,"select",22),e.YNc(29,Re,2,2,"option",23),e.qZA()(),e.TgZ(30,"div",20)(31,"label",24),e._uU(32,"\u0627\u0644\u062f\u0648\u0644\u0629*"),e.qZA(),e.TgZ(33,"select",25),e.NdJ("change",function(a){return n.onCountryChange(a)}),e.YNc(34,ke,2,2,"option",23),e.qZA()(),e.TgZ(35,"div",20)(36,"label",26),e._uU(37,"\u0627\u0644\u0645\u062f\u064a\u0646\u0629*"),e.qZA(),e.TgZ(38,"select",27),e.YNc(39,Le,2,2,"option",23),e.qZA()(),e.TgZ(40,"div",20)(41,"label",28),e._uU(42,"\u0627\u0644\u0647\u0627\u062a\u0641*"),e.qZA(),e._UZ(43,"input",29),e.qZA(),e.TgZ(44,"div",20)(45,"label",30),e._uU(46,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a*"),e.qZA(),e._UZ(47,"input",31),e.qZA(),e.TgZ(48,"div",20)(49,"label",32),e._uU(50,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646*"),e.qZA(),e._UZ(51,"textarea",33),e.qZA(),e.TgZ(52,"div",17)(53,"button",34),e._uU(54," \u062d\u0641\u0638 "),e.qZA()()()()()()()(),e.TgZ(55,"div",1),e.YNc(56,Ue,7,1,"div",35),e.qZA()()),2&i&&(e.xp6(5),e.Q6J("formGroup",n.addCorporateForm),e.xp6(3),e.Q6J("ngIf",n.logoUrl),e.xp6(1),e.Q6J("ngIf",n.logoUrl),e.xp6(1),e.Q6J("ngIf",!n.logoUrl),e.xp6(7),e.Q6J("routerLink",e.VKq(12,He,e.lcZ(18,10,"/dashboard/corporates"))),e.xp6(12),e.Q6J("ngForOf",n.companyStatuses),e.xp6(5),e.Q6J("ngForOf",n.countriesList),e.xp6(5),e.Q6J("ngForOf",n.citiesList),e.xp6(14),e.Q6J("disabled",n.addCorporateForm.invalid),e.xp6(3),e.Q6J("ngIf",n.corporateDocuments&&n.corporateDocuments.length>0))},dependencies:[f.ez,f.sg,f.O5,v.Bz,v.rH,w.fQ,w.lO,p.u5,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.On,p.UX,p.sg,p.u,Me,Ee,ft,vt,Se,U.lN,U.KE,U.hX,U.R9,bt.c,bt.Nt,xt.LD,xt.gD,j.ey],styles:[".verification-section[_ngcontent-%COMP%]{margin-top:2%;padding:0}.verification-section[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.verification-section[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{height:60px}.verification-section[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:var(--main);font-size:1.2rem;font-weight:700}.verification-section[_ngcontent-%COMP%]   .document-row[_ngcontent-%COMP%]{margin-bottom:16px;box-shadow:0 2px 4px #0000001a;padding:16px;border-radius:4px;background-color:#fff}  .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px!important;margin-right:8px!important}"]})}return s})();const ze=function(s){return[s]};function Ye(s,o){if(1&s&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10),e._UZ(3,"img",11),e.qZA(),e.TgZ(4,"div",12)(5,"div",13)(6,"div",1)(7,"div",14)(8,"a",15),e.ALo(9,"localize"),e._uU(10,"\u0631\u062c\u0648\u0639"),e.qZA()()(),e.TgZ(11,"div",16)(12,"ul")(13,"li"),e._uU(14),e.qZA(),e.TgZ(15,"li"),e._uU(16),e.qZA(),e.TgZ(17,"li"),e._uU(18),e.qZA(),e.TgZ(19,"li"),e._uU(20),e.qZA(),e.TgZ(21,"li"),e._uU(22),e.qZA(),e.TgZ(23,"li"),e._uU(24),e.qZA(),e.TgZ(25,"li"),e._uU(26),e.qZA(),e.TgZ(27,"li"),e._uU(28),e.qZA(),e.TgZ(29,"li"),e._uU(30),e.qZA()()()()()()()),2&s){const t=e.oxw();e.xp6(3),e.Q6J("src",t.logoUrl||"./assets/images/corporateLogo.png",e.LSH),e.xp6(5),e.Q6J("routerLink",e.VKq(13,ze,e.lcZ(9,11,"/dashboard/corporates"))),e.xp6(6),e.hij("\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629: ",t.corporate.name,""),e.xp6(2),e.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",t.corporate.tax_register,""),e.xp6(2),e.hij(" \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a: ",t.corporate.commercial_record," "),e.xp6(2),e.hij("\u0627\u0644\u0628\u0644\u062f: ",t.corporate.country,""),e.xp6(2),e.hij("\u0627\u0644\u0645\u062f\u064a\u0646\u0629: ",t.corporate.city,""),e.xp6(2),e.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",t.corporate.address,""),e.xp6(2),e.hij("\u0627\u0644\u0647\u0627\u062a\u0641: ",t.corporate.phone,""),e.xp6(2),e.hij("\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a: ",t.corporate.email,""),e.xp6(2),e.hij("\u0627\u0644\u062d\u0627\u0644\u0629: ",t.corporate.status,"")}}function Je(s,o){1&s&&(e.TgZ(0,"div",17)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}let Ge=(()=>{class s{constructor(t,i,n,r,a,l,c,d,u){this.activatedRoute=t,this.corporatesService=i,this.fb=n,this.localize=r,this.router=a,this._MessagesService=l,this.employeesService=c,this.IMS=d,this.dialog=u,this.corporateId="",this.logoUrl=null,this.isEditMode=!1,this.countriesList=[],this.citiesList=[],this.selectedFile=null,this.addCorporateForm=this.fb.group({corporate_id:["",p.kI.required],name:["",p.kI.required],tax_register:["",p.kI.required],commercial_record:["",p.kI.required],country:["",p.kI.required],city:["",p.kI.required],address:["",p.kI.required],password:[""],logo:[null],phone:["",p.kI.required],email:["",[p.kI.required,p.kI.email]],status:["",p.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const i=t.get("id");i&&(this.corporateId=i,this.isEditMode=!0,this.corporatesService.GetCorporateById(i,{corporate_id:i}).subscribe(r=>{r&&r.data&&(this.corporate=r.data,this.setFormValues(r.data))}))})}prepareNavBar(){this.corporatesService.initializeNavItems()}setFormValues(t){this.addCorporateForm.patchValue({corporate_id:t.id||"",name:t.name||"",tax_register:t.tax_register||"",commercial_record:t.commercial_record||"",country:t.country||"",city:t.city||"",address:t.address||"",password:t.password||"",phone:t.phone||"",email:t.email||"",status:t.status||""}),t.logo&&(this.logoUrl=t.logo)}openInNewWindow(t){window.open(t,"_blank")}removeLogo(){this.logoUrl=null,this.selectedFile=null}onFileChange(t){const i=t.target.files[0];if(i){this.selectedFile=i;const n=new FileReader;n.onload=r=>{this.logoUrl=r.target.result},n.readAsDataURL(i)}}addCorporate(){if(this.addCorporateForm.valid){const i={...this.addCorporateForm.value,attachment:this.selectedFile?[this.selectedFile]:[]};this.corporatesService.AddCorporate(i).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0634\u0631\u0643\u0629",3e3),this.navigateToCorporatesList()},error:n=>{console.error("Failed to add corporate:",n)}})}}updateCorporate(){if(this.addCorporateForm.valid){const i={...this.addCorporateForm.value,logo:this.selectedFile?this.selectedFile:null};this.corporatesService.UpdateCorporate(this.corporateId,i).subscribe({next:n=>{this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",3e3),this.navigateToCorporatesList()},error:n=>{console.error("Failed to update corporate:",n)}})}}navigateToCorporatesList(){this.router.navigate(["/dashboard/corporates"])}navigateToAddCorporate(){const t=this.localize.translateRoute("/dashboard/corporates/add-corporate");this.router.navigate([t])}onSubmit(){this.addCorporateForm.valid&&(this.isEditMode?this.updateCorporate():this.addCorporate())}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(v.gz),e.Y36(G),e.Y36(p.qu),e.Y36(w.An),e.Y36(v.F0),e.Y36(L.K),e.Y36(Ct.M),e.Y36(Dt.K),e.Y36(B.uw))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-view-corporate"]],standalone:!0,features:[e.jDz],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","listCorporates","role","tabpanel","aria-labelledby","listCorporates-tab","tabindex","0",1,"tab-pane","fade","show","active"],[1,"col-12","mb-1"],["class","card mb-3 border-0",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"card","mb-3","border-0"],[1,"row","g-0","align-items-center"],[1,"col-md-3","p-2","text-center"],["alt","Corporate Logo",1,"img-fluid","rounded-start",2,"height","200px","object-fit","cover",3,"src"],[1,"col-md-9","mb-2"],[1,"card-body"],[1,"col-12","mb-3","text-end"],[1,"btn","px-4","back",3,"routerLink"],[1,""],[1,"text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5),e.YNc(7,Ye,31,15,"div",6),e.YNc(8,Je,3,0,"div",7),e.qZA()()()()()()()),2&i&&(e.xp6(7),e.Q6J("ngIf",n.corporate),e.xp6(1),e.Q6J("ngIf",!n.corporate))},dependencies:[f.ez,f.O5,p.u5,v.Bz,v.rH,w.fQ,w.lO]})}return s})();var X=h(5541),P=h(2831),Be=h(1687),Qe=h(927),yt=h(5592),H=h(9773),$e=h(7398),je=h(9397),Ve=h(4664),wt=h(9388);function tt(s,o,t){for(let i in o)if(o.hasOwnProperty(i)){const n=o[i];n?s.setProperty(i,n,t?.has(i)?"important":""):s.removeProperty(i)}return s}function T(s,o){const t=o?"":"none";tt(s.style,{"touch-action":o?"":"none","-webkit-user-drag":o?"":"none","-webkit-tap-highlight-color":o?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Pt(s,o,t){tt(s.style,{position:o?"":"fixed",top:o?"":"0",opacity:o?"":"0",left:o?"":"-999em"},t)}function q(s,o){return o&&"none"!=o?s+" "+o:s}function St(s){const o=s.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(s)*o}function et(s,o){return s.getPropertyValue(o).split(",").map(i=>i.trim())}function it(s){const o=s.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}function nt(s,o,t){const{top:i,bottom:n,left:r,right:a}=s;return t>=i&&t<=n&&o>=r&&o<=a}function A(s,o,t){s.top+=o,s.bottom=s.top+s.height,s.left+=t,s.right=s.left+s.width}function Et(s,o,t,i){const{top:n,right:r,bottom:a,left:l,width:c,height:d}=s,u=c*o,_=d*o;return i>n-_&&i<a+_&&t>l-u&&t<r+u}class Mt{constructor(o){this._document=o,this.positions=new Map}clear(){this.positions.clear()}cache(o){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),o.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:it(t)})})}handleScroll(o){const t=(0,P.sA)(o),i=this.positions.get(t);if(!i)return null;const n=i.scrollPosition;let r,a;if(t===this._document){const d=this.getViewportScrollPosition();r=d.top,a=d.left}else r=t.scrollTop,a=t.scrollLeft;const l=n.top-r,c=n.left-a;return this.positions.forEach((d,u)=>{d.clientRect&&t!==u&&t.contains(u)&&A(d.clientRect,l,c)}),n.top=r,n.left=a,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Tt(s){const o=s.cloneNode(!0),t=o.querySelectorAll("[id]"),i=s.nodeName.toLowerCase();o.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return"canvas"===i?At(s,o):("input"===i||"select"===i||"textarea"===i)&&Ot(s,o),It("canvas",s,o,At),It("input, textarea, select",s,o,Ot),o}function It(s,o,t,i){const n=o.querySelectorAll(s);if(n.length){const r=t.querySelectorAll(s);for(let a=0;a<n.length;a++)i(n[a],r[a])}}let We=0;function Ot(s,o){"file"!==o.type&&(o.value=s.value),"radio"===o.type&&o.name&&(o.name=`mat-clone-${o.name}-${We++}`)}function At(s,o){const t=o.getContext("2d");if(t)try{t.drawImage(s,0,0)}catch{}}const Rt=(0,P.i$)({passive:!0}),z=(0,P.i$)({passive:!1}),ot=new Set(["position"]);class ti{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(o){const t=(0,g.Ig)(o);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>T(i,t)))}constructor(o,t,i,n,r,a){this._config=t,this._document=i,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new m.x,this._pointerMoveSubscription=S.w0.EMPTY,this._pointerUpSubscription=S.w0.EMPTY,this._scrollSubscription=S.w0.EMPTY,this._resizeSubscription=S.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new m.x,this.started=new m.x,this.released=new m.x,this.ended=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const E=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),M=this._dropContainer;if(!E)return void this._endDragSequence(l);(!M||!M.isDragging()&&!M.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,_=this._activeTransform;_.x=d.x-u.x+this._passiveTransform.x,_.y=d.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(_.x,_.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:l,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(o).withParent(t.parentDragRef||null),this._parentPositions=new Mt(i),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(o){this._handles=o.map(i=>(0,g.fI)(i)),this._handles.forEach(i=>T(i,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(o){return this._previewTemplate=o,this}withPlaceholderTemplate(o){return this._placeholderTemplate=o,this}withRootElement(o){const t=(0,g.fI)(o);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,z),t.addEventListener("touchstart",this._pointerDown,Rt),t.addEventListener("dragstart",this._nativeDragStart,z)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(o){return this._boundaryElement=o?(0,g.fI)(o):null,this._resizeSubscription.unsubscribe(),o&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(o){return this._parentDragRef=o,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(o){!this._disabledHandles.has(o)&&this._handles.indexOf(o)>-1&&(this._disabledHandles.add(o),T(o,!0))}enableHandle(o){this._disabledHandles.has(o)&&(this._disabledHandles.delete(o),T(o,this.disabled))}withDirection(o){return this._direction=o,this}_withDropContainer(o){this._dropContainer=o}getFreeDragPosition(){const o=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:o.x,y:o.y}}setFreeDragPosition(o){return this._activeTransform={x:0,y:0},this._passiveTransform.x=o.x,this._passiveTransform.y=o.y,this._dropContainer||this._applyRootElementTransform(o.x,o.y),this}withPreviewContainer(o){return this._previewContainer=o,this}_sortFromLastPointerPosition(){const o=this._lastKnownPointerPosition;o&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(o),o)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(o){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:o}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(o),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(o);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:o})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(o){R(o)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const i=this._rootElement,n=i.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();n.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Pt(i,!1,ot),this._document.body.appendChild(n.replaceChild(r,i)),this._getPreviewInsertionPoint(n,l).appendChild(this._preview),this.started.next({source:this,event:o}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:o}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(o,t){this._parentDragRef&&t.stopPropagation();const i=this.isDragging(),n=R(t),r=!n&&0!==t.button,a=this._rootElement,l=(0,P.sA)(t),c=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=n?(0,F.yG)(t):(0,F.X6)(t);if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),i||r||c||d)return;if(this._handles.length){const x=a.style;this._rootElementTapHighlight=x.webkitTapHighlightColor||"",x.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(x=>this._updateOnScroll(x)),this._boundaryElement&&(this._boundaryRect=it(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,o,t);const _=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:_.x,y:_.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(o){Pt(this._rootElement,!0,ot),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),n=this._getPointerPositionOnPage(o),r=this._getDragDistance(n),a=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r,dropPoint:n,event:o}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:n,event:o}),t.drop(this,i,this._initialIndex,this._initialContainer,a,r,n,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:o,y:t},{x:i,y:n}){let r=this._initialContainer._getSiblingContainerFromPosition(this,o,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(o,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,o,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,o,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(o,t):this._applyPreviewTransform(o-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const o=this._previewTemplate,t=this.previewClass,i=o?o.template:null;let n;if(i&&o){const r=o.matchSize?this._initialClientRect:null,a=o.viewContainer.createEmbeddedView(i,o.context);a.detectChanges(),n=Lt(a,this._document),this._previewRef=a,o.matchSize?Ft(n,r):n.style.transform=Y(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Tt(this._rootElement),Ft(n,this._initialClientRect),this._initialTransform&&(n.style.transform=this._initialTransform);return tt(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ot),T(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(r=>n.classList.add(r)):n.classList.add(t)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const o=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(o.left,o.top);const t=function Ke(s){const o=getComputedStyle(s),t=et(o,"transition-property"),i=t.find(l=>"transform"===l||"all"===l);if(!i)return 0;const n=t.indexOf(i),r=et(o,"transition-duration"),a=et(o,"transition-delay");return St(r[n])+St(a[n])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const n=a=>{(!a||(0,P.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",n),i(),clearTimeout(r))},r=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const o=this._placeholderTemplate,t=o?o.template:null;let i;return t?(this._placeholderRef=o.viewContainer.createEmbeddedView(t,o.context),this._placeholderRef.detectChanges(),i=Lt(this._placeholderRef,this._document)):i=Tt(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(o,t,i){const n=t===this._rootElement?null:t,r=n?n.getBoundingClientRect():o,a=R(i)?i.targetTouches[0]:i,l=this._getViewportScrollPosition();return{x:r.left-o.left+(a.pageX-r.left-l.left),y:r.top-o.top+(a.pageY-r.top-l.top)}}_getPointerPositionOnPage(o){const t=this._getViewportScrollPosition(),i=R(o)?o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0}:o,n=i.pageX-t.left,r=i.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=n,l.y=r,l.matrixTransform(a.inverse())}}return{x:n,y:r}}_getConstrainedPointerPosition(o){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:n}=this.constrainPosition?this.constrainPosition(o,this,this._initialClientRect,this._pickupPositionInElement):o;if("x"===this.lockAxis||"x"===t?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:r,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),u=l.top+a,_=l.bottom-(d-a);i=kt(i,l.left+r,l.right-(c-r)),n=kt(n,u,_)}return{x:i,y:n}}_updatePointerDirectionDelta(o){const{x:t,y:i}=o,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-r.x),l=Math.abs(i-r.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=t>r.x?1:-1,r.x=t),l>this._config.pointerDirectionChangeThreshold&&(n.y=i>r.y?1:-1,r.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const o=this._handles.length>0||!this.isDragging();o!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=o,T(this._rootElement,o))}_removeRootElementListeners(o){o.removeEventListener("mousedown",this._pointerDown,z),o.removeEventListener("touchstart",this._pointerDown,Rt),o.removeEventListener("dragstart",this._nativeDragStart,z)}_applyRootElementTransform(o,t){const i=Y(o,t),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=q(i,this._initialTransform)}_applyPreviewTransform(o,t){const i=this._previewTemplate?.template?void 0:this._initialTransform,n=Y(o,t);this._preview.style.transform=q(n,i)}_getDragDistance(o){const t=this._pickupPositionOnPage;return t?{x:o.x-t.x,y:o.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:o,y:t}=this._passiveTransform;if(0===o&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const r=n.left-i.left,a=i.right-n.right,l=n.top-i.top,c=i.bottom-n.bottom;n.width>i.width?(r>0&&(o+=r),a>0&&(o-=a)):o=0,n.height>i.height?(l>0&&(t+=l),c>0&&(t-=c)):t=0,(o!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:o})}_getDragStartDelay(o){const t=this.dragStartDelay;return"number"==typeof t?t:R(o)?t.touch:t?t.mouse:0}_updateOnScroll(o){const t=this._parentPositions.handleScroll(o);if(t){const i=(0,P.sA)(o);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&A(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,P.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(o,t){const i=this._previewContainer||"global";if("parent"===i)return o;if("global"===i){const n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,g.fI)(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(o){return this._handles.find(t=>o.target&&(o.target===t||t.contains(o.target)))}}function Y(s,o){return`translate3d(${Math.round(s)}px, ${Math.round(o)}px, 0)`}function kt(s,o,t){return Math.max(o,Math.min(t,s))}function R(s){return"t"===s.type[0]}function Lt(s,o){const t=s.rootNodes;if(1===t.length&&t[0].nodeType===o.ELEMENT_NODE)return t[0];const i=o.createElement("div");return t.forEach(n=>i.appendChild(n)),i}function Ft(s,o){s.style.width=`${o.width}px`,s.style.height=`${o.height}px`,s.style.transform=Y(o.left,o.top)}function Zt(s,o,t){const i=k(o,s.length-1),n=k(t,s.length-1);if(i===n)return;const r=s[i],a=n<i?-1:1;for(let l=i;l!==n;l+=a)s[l]=s[l+a];s[n]=r}function k(s,o){return Math.max(0,Math.min(o,s))}class ei{constructor(o,t){this._element=o,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(o){this.withItems(o)}sort(o,t,i,n){const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(o,t,i,n);if(-1===a&&r.length>0)return null;const l="horizontal"===this.orientation,c=r.findIndex(C=>C.drag===o),d=r[a],_=d.clientRect,x=c>a?1:-1,E=this._getItemOffsetPx(r[c].clientRect,_,x),M=this._getSiblingOffsetPx(c,r,x),I=r.slice();return Zt(r,c,a),r.forEach((C,Pi)=>{if(I[Pi]===C)return;const Kt=C.drag===o,ct=Kt?E:M,Wt=Kt?o.getPlaceholderElement():C.drag.getRootElement();C.offset+=ct,l?(Wt.style.transform=q(`translate3d(${Math.round(C.offset)}px, 0, 0)`,C.initialTransform),A(C.clientRect,0,ct)):(Wt.style.transform=q(`translate3d(0, ${Math.round(C.offset)}px, 0)`,C.initialTransform),A(C.clientRect,ct,0))}),this._previousSwap.overlaps=nt(_,t,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=l?n.x:n.y,{previousIndex:c,currentIndex:a}}enter(o,t,i,n){const r=null==n||n<0?this._getItemIndexFromPointerPosition(o,t,i):n,a=this._activeDraggables,l=a.indexOf(o),c=o.getPlaceholderElement();let d=a[r];if(d===o&&(d=a[r+1]),!d&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(d=a[0]),l>-1&&a.splice(l,1),d&&!this._dragDropRegistry.isDragging(d)){const u=d.getRootElement();u.parentElement.insertBefore(c,u),a.splice(r,0,o)}else(0,g.fI)(this._element).appendChild(c),a.push(o);c.style.transform="",this._cacheItemPositions()}withItems(o){this._activeDraggables=o.slice(),this._cacheItemPositions()}withSortPredicate(o){this._sortPredicate=o}reset(){this._activeDraggables.forEach(o=>{const t=o.getRootElement();if(t){const i=this._itemPositions.find(n=>n.drag===o)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(o){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===o)}updateOnScroll(o,t){this._itemPositions.forEach(({clientRect:i})=>{A(i,o,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const o="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:it(i)}}).sort((t,i)=>o?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getItemOffsetPx(o,t,i){const n="horizontal"===this.orientation;let r=n?t.left-o.left:t.top-o.top;return-1===i&&(r+=n?t.width-o.width:t.height-o.height),r}_getSiblingOffsetPx(o,t,i){const n="horizontal"===this.orientation,r=t[o].clientRect,a=t[o+-1*i];let l=r[n?"width":"height"]*i;if(a){const c=n?"left":"top",d=n?"right":"bottom";-1===i?l-=a.clientRect[c]-r[d]:l+=r[c]-a.clientRect[d]}return l}_shouldEnterAsFirstChild(o,t){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,n="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const a=i[i.length-1].clientRect;return n?o>=a.right:t>=a.bottom}{const a=i[0].clientRect;return n?o<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(o,t,i,n){const r="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>l!==o&&((!n||l!==this._previousSwap.drag||!this._previousSwap.overlaps||(r?n.x:n.y)!==this._previousSwap.delta)&&(r?t>=Math.floor(c.left)&&t<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom))));return-1!==a&&this._sortPredicate(a,o)?a:-1}}class ii{constructor(o,t,i,n,r){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.sorted=new m.x,this.receivingStarted=new m.x,this.receivingStopped=new m.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=S.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new m.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,Be.F)(0,Qe.Z).pipe((0,H.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,g.fI)(o),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Mt(i),this._sortStrategy=new ei(this.element,t),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(o,t,i,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(o)),this._sortStrategy.enter(o,t,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:o,container:this,currentIndex:this.getItemIndex(o)})}exit(o){this._reset(),this.exited.next({item:o,container:this})}drop(o,t,i,n,r,a,l,c={}){this._reset(),this.dropped.next({item:o,currentIndex:t,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:r,distance:a,dropPoint:l,event:c})}withItems(o){const t=this._draggables;return this._draggables=o,o.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>-1===o.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(o){return this._sortStrategy.direction=o,this}connectedTo(o){return this._siblings=o.slice(),this}withOrientation(o){return this._sortStrategy.orientation=o,this}withScrollableParents(o){const t=(0,g.fI)(this.element);return this._scrollableElements=-1===o.indexOf(t)?[t,...o]:o.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(o){return this._isDragging?this._sortStrategy.getItemIndex(o):this._draggables.indexOf(o)}isReceiving(){return this._activeSiblings.size>0}_sortItem(o,t,i,n){if(this.sortingDisabled||!this._clientRect||!Et(this._clientRect,.05,t,i))return;const r=this._sortStrategy.sort(o,t,i,n);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:o})}_startScrollingIfNecessary(o,t){if(this.autoScrollDisabled)return;let i,n=0,r=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||i||Et(a.clientRect,.05,o,t)&&([n,r]=function ni(s,o,t,i){const n=Ht(o,i),r=qt(o,t);let a=0,l=0;if(n){const c=s.scrollTop;1===n?c>0&&(a=1):s.scrollHeight-c>s.clientHeight&&(a=2)}if(r){const c=s.scrollLeft;1===r?c>0&&(l=1):s.scrollWidth-c>s.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,o,t),(n||r)&&(i=l))}),!n&&!r){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};n=Ht(c,t),r=qt(c,o),i=window}i&&(n!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=i,(n||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const o=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=o.msScrollSnapType||o.scrollSnapType||"",o.scrollSnapType=o.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const o=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(o).clientRect}_reset(){this._isDragging=!1;const o=(0,g.fI)(this.element).style;o.scrollSnapType=o.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(o,t){return null!=this._clientRect&&nt(this._clientRect,o,t)}_getSiblingContainerFromPosition(o,t,i){return this._siblings.find(n=>n._canReceive(o,t,i))}_canReceive(o,t,i){if(!this._clientRect||!nt(this._clientRect,t,i)||!this.enterPredicate(o,this))return!1;const n=this._getShadowRoot().elementFromPoint(t,i);if(!n)return!1;const r=(0,g.fI)(this.element);return n===r||r.contains(n)}_startReceiving(o,t){const i=this._activeSiblings;!i.has(o)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(o),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:o,receiver:this,items:t}))}_stopReceiving(o){this._activeSiblings.delete(o),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:o,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(o=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(o);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const o=(0,P.kV)((0,g.fI)(this.element));this._cachedShadowRoot=o||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const o=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,o))}}function Ht(s,o){const{top:t,bottom:i,height:n}=s,r=.05*n;return o>=t-r&&o<=t+r?1:o>=i-r&&o<=i+r?2:0}function qt(s,o){const{left:t,right:i,width:n}=s,r=.05*n;return o>=t-r&&o<=t+r?1:o>=i-r&&o<=i+r?2:0}const J=(0,P.i$)({passive:!1,capture:!0});let oi=(()=>{class s{constructor(t,i){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new m.x,this.pointerUp=new m.x,this.scroll=new m.x,this._preventDefaultWhileDragging=n=>{this._activeDragInstances.length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,J)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,J)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const n=i.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:J}),n||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:J}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,a)=>{this._document.addEventListener(a,r.handler,r.options)})})}}stopDragging(t){const i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const i=[this.scroll];return t&&t!==this._document&&i.push(new yt.y(n=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&n.next(l)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,N.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}static#t=this.\u0275fac=function(i){return new(i||s)(e.LFG(e.R0b),e.LFG(f.K0))};static#e=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const si={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let st=(()=>{class s{constructor(t,i,n,r){this._document=t,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=r}createDrag(t,i=si){return new ti(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ii(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#t=this.\u0275fac=function(i){return new(i||s)(e.LFG(f.K0),e.LFG(e.R0b),e.LFG(X.rL),e.LFG(oi))};static#e=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const rt=new e.OlP("CDK_DRAG_PARENT"),at=new e.OlP("CdkDragHandle"),zt=new e.OlP("CdkDragPlaceholder"),Yt=new e.OlP("CdkDragPreview"),Jt=new e.OlP("CDK_DRAG_CONFIG"),Gt=new e.OlP("CdkDropList");let Bt=(()=>{class s{static#t=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._dragRef.disabled=this._disabled}constructor(t,i,n,r,a,l,c,d,u,_,x){this.element=t,this.dropContainer=i,this._ngZone=r,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=u,this._selfHandle=_,this._parentDrag=x,this._destroyed=new m.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new yt.y(E=>{const M=this._dragRef.moved.pipe((0,$e.U)(I=>({source:this,pointerPosition:I.pointerPosition,event:I.event,delta:I.delta,distance:I.distance}))).subscribe(E);return()=>{M.unsubscribe()}}),this._dragRef=d.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,s._dragInstances.push(this),l&&this._assignDefaults(l),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,V.q)(1),(0,H.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const i=t.rootElementSelector,n=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=s._dragInstances.indexOf(this);t>-1&&s._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let i=t;this.rootElementSelector&&(i=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,g.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const i=this._dir,n=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:(0,g.su)(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe((0,V.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){t.withParent(s._dragInstances.find(n=>n.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){const{lockAxis:i,dragStartDelay:n,constrainPosition:r,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:d,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),r&&(this.constrainPosition=r),a&&(this.previewClass=a),l&&(this.boundaryElement=l),d&&(this.rootElementSelector=d),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.changes.pipe((0,O.O)(this._handles),(0,je.b)(t=>{const i=t.filter(n=>n._parentDrag===this).map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,Ve.w)(t=>(0,N.T)(...t.map(i=>i._stateChanges.pipe((0,O.O)(i))))),(0,H.R)(this._destroyed)).subscribe(t=>{const i=this._dragRef,n=t.element.nativeElement;t.disabled?i.disableHandle(n):i.enableHandle(n)})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(Gt,12),e.Y36(f.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Jt,8),e.Y36(wt.Is,8),e.Y36(st),e.Y36(e.sBO),e.Y36(at,10),e.Y36(rt,12))};static#i=this.\u0275dir=e.lG2({type:s,selectors:[["","cdkDrag",""]],contentQueries:function(i,n,r){if(1&i&&(e.Suo(r,Yt,5),e.Suo(r,zt,5),e.Suo(r,at,5)),2&i){let a;e.iGM(a=e.CRH())&&(n._previewTemplate=a.first),e.iGM(a=e.CRH())&&(n._placeholderTemplate=a.first),e.iGM(a=e.CRH())&&(n._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){2&i&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:rt,useExisting:s}]),e.TTD]})}return s})();const lt=new e.OlP("CdkDropListGroup");let hi=0,Qt=(()=>{class s{static#t=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,g.Ig)(t)}constructor(t,i,n,r,a,l,c){this.element=t,this._changeDetectorRef=n,this._scrollDispatcher=r,this._dir=a,this._group=l,this._destroyed=new m.x,this.connectedTo=[],this.id="cdk-drop-list-"+hi++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(d,u)=>this.enterPredicate(d.data,u.data),this._dropListRef.sortPredicate=(d,u,_)=>this.sortPredicate(d,u.data,_.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),l&&l._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=s._dropLists.indexOf(this);t>-1&&s._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,O.O)(this._dir.value),(0,H.R)(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{const i=(0,g.Eq)(this.connectedTo).map(n=>"string"==typeof n?s._dropLists.find(a=>a.id===n):n);if(this._group&&this._group._items.forEach(n=>{-1===i.indexOf(n)&&i.push(n)}),!this._scrollableParentsResolved){const n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,g.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,g.su)(this.autoScrollStep,2),t.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),(0,N.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:i,draggingDisabled:n,sortingDisabled:r,listAutoScrollDisabled:a,listOrientation:l}=t;this.disabled=n??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(e.SBq),e.Y36(st),e.Y36(e.sBO),e.Y36(X.mF),e.Y36(wt.Is,8),e.Y36(lt,12),e.Y36(Jt,8))};static#i=this.\u0275dir=e.lG2({type:s,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){2&i&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:lt,useValue:void 0},{provide:Gt,useExisting:s}])]})}return s})(),pi=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({providers:[st],imports:[X.ZD]})}return s})();var $t=h(7715),jt=h(6328);let ui=(()=>{class s{constructor(t,i){this.http=t,this.navService=i,this.documentsListUrl=`${y.N.elitersUrl}documents`,this.updateDocumentUrl=`${y.N.elitersUrl}document/update`,this.createDocumentUrl=`${y.N.elitersUrl}document/create`,this.deleteDocumentUrl=`${y.N.elitersUrl}document/delete`}getDocumentsList(t){let i=new D.LE;return t&&Object.keys(t).forEach(n=>{i=i.append(n,t[n])}),this.http.get(this.documentsListUrl,{params:i})}AddDocument(t,i){let n=new D.LE;i&&Object.keys(i).forEach(a=>{n=n.append(a,i[a])});const r=new FormData;return Object.keys(t).forEach(a=>{Array.isArray(t[a])?t[a].forEach((l,c)=>{r.append(`${a}[${c}]`,l)}):r.append(a,t[a])}),this.http.post(this.createDocumentUrl,r,{params:n})}UpdateDocument(t,i,n){let r=new D.LE;n&&Object.keys(n).forEach(l=>{r=r.append(l,n[l])});const a=new FormData;return Object.keys(i).forEach(l=>{Array.isArray(i[l])?i[l].forEach((c,d)=>{a.append(`${l}[${d}]`,c)}):a.append(l,i[l])}),this.http.post(this.updateDocumentUrl,a,{params:r})}DeleteDocument(t,i){const n=new FormData;return Object.keys(i).forEach(r=>{Array.isArray(i[r])?i[r].forEach((a,l)=>{n.append(`${r}[${l}]`,a)}):n.append(r,i[r])}),this.http.post(this.deleteDocumentUrl,n)}static#t=this.\u0275fac=function(i){return new(i||s)(e.LFG(D.eN),e.LFG(ht.f))};static#e=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function gi(s,o){if(1&s&&(e.TgZ(0,"div",14),e._uU(1),e.TgZ(2,"div",15),e._UZ(3,"span",16)(4,"span",16)(5,"span",16),e.qZA()()),2&s){const t=o.$implicit;e.xp6(1),e.hij(" ",t.label," ")}}const mi=function(){return["preview"]};function _i(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("cdkDropListDropped",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.drop(n))}),e.TgZ(1,"h3",12),e._uU(2,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u062f\u062e\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u0627\u062d\u0629"),e.qZA(),e.YNc(3,gi,6,1,"div",13),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("cdkDropListData",t.availableFields)("cdkDropListConnectedTo",e.DdM(3,mi)),e.xp6(3),e.Q6J("ngForOf",t.availableFields)}}function fi(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.enableEdit())}),e._UZ(1,"i",18),e.TgZ(2,"span"),e._uU(3,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0644\u0641"),e.qZA()()}}function vi(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.discardEdit())}),e._UZ(1,"i",20),e.TgZ(2,"span"),e._uU(3,"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u0639\u062f\u064a\u0644"),e.qZA()()}}function bi(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",35)(1,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index,r=e.oxw();return e.KtG(r.removeField(n))}),e._UZ(2,"i",20),e.qZA()()}}function xi(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._UZ(3,"span",16)(4,"span",16)(5,"span",16),e.qZA(),e.TgZ(6,"div",23),e._UZ(7,"span",16)(8,"span",16)(9,"span",16),e.qZA()(),e.TgZ(10,"div",24)(11,"input",25),e.NdJ("blur",function(n){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.updateLabel(n,a))})("focus",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onLabelFocus(n))}),e.qZA(),e.TgZ(12,"div",26)(13,"div",27)(14,"div",28)(15,"input",29),e.NdJ("change",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onRequiredChange(r.controlName,!0,r))}),e.qZA(),e.TgZ(16,"span"),e._uU(17," \u0645\u0637\u0644\u0648\u0628"),e.qZA()(),e.TgZ(18,"div",28)(19,"input",30),e.NdJ("change",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onRequiredChange(r.controlName,!1,r))}),e.qZA(),e.TgZ(20,"span"),e._uU(21," \u063a\u064a\u0631 \u0645\u0637\u0644\u0648\u0628"),e.qZA()()()(),e.TgZ(22,"div",31)(23,"label",32),e._uU(24,"\u0627\u0644\u0648\u0635\u0641"),e.qZA(),e.TgZ(25,"textarea",33),e.NdJ("blur",function(n){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.updateDescription(n,a))}),e.qZA()()(),e.YNc(26,bi,3,0,"div",34),e.qZA()}if(2&s){const t=o.$implicit,i=o.index,n=e.oxw();e.xp6(11),e.Q6J("value",t.label)("disabled",n.isFieldDisabled(t)),e.xp6(4),e.MGl("name","required_",i,""),e.Q6J("checked",null==t.validators?null:t.validators.is_required)("disabled",n.isFieldDisabled(t)),e.xp6(4),e.MGl("name","required_",i,""),e.Q6J("checked",!(null!=t.validators&&t.validators.is_required))("disabled",n.isFieldDisabled(t)),e.xp6(6),e.Q6J("disabled",n.isFieldDisabled(t))("value",t.description),e.xp6(1),e.Q6J("ngIf",n.showRemoveIcon(t))}}function Ci(s,o){if(1&s&&(e.TgZ(0,"button",37),e._uU(1," \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u0644\u0641 "),e.qZA()),2&s){const t=e.oxw();e.Q6J("disabled",t.isUpdateDisabled)}}function Di(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateFiles())}),e._uU(1," \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0644\u0641 "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("disabled",t.isUpdateDisabled)}}const yi=function(){return["available"]};let Vt=(()=>{class s{constructor(t,i,n,r,a,l){this.fb=t,this.dialog=i,this.route=n,this.documentService=r,this._MessagesService=a,this.router=l,this.availableFields=[],this.previewFields=[],this.existingInputs=[],this.disabledFields=[],this.EditMode=!1,this.ShowMode=!1,this.documentExists=null,this.form=this.fb.group({}),this.availableFields=[{label:"Email",controlName:"email",data_type:"email",description:"",file_type:"",is_unique:1,validators:{is_required:!0,email:!0}},{label:"PDF File",controlName:"file",data_type:"file",description:"",is_unique:1,file_type:".pdf",validators:{is_required:!0,fileType:".pdf"}},{label:"Image File",controlName:"file",data_type:"file",description:"",is_unique:1,file_type:".jpg,.jpeg,.png",validators:{is_required:!0,fileType:".jpg,.jpeg,.png"}},{label:"Text",controlName:"text",data_type:"text",description:"",is_unique:0,file_type:"",validators:{is_required:!0}},{label:"Number",controlName:"number",data_type:"number",description:"",is_unique:1,file_type:"",validators:{is_required:!0}}],this.existingInputs=[]}ngOnInit(){this.router.url.includes("documents/list")?(this.documentExists="yes",this.getDocuments(),this.activateShowMode()):this.getDocuments()}getDocuments(){this.documentService.getDocumentsList().subscribe({next:t=>{Array.isArray(t.data)&&t.data.length>0&&(this.existingInputs=t.data.map(i=>({id:i.id,label:i.name||"Default Label",data_type:i.data_type||"defaultDataType",description:i.description||"Default description",is_unique:i.is_unique,validators:{is_required:!!i.is_required,email:"email"==i.data_type}})),this.documentExists||(this.disabledFields=JSON.parse(JSON.stringify(this.existingInputs)))),this.previewFields=JSON.parse(JSON.stringify(this.existingInputs))}})}activateShowMode(){this.EditMode=!1,this.ShowMode=!0,this.previewFields=JSON.parse(JSON.stringify(this.existingInputs))}enableEdit(){this.EditMode=!0,this.ShowMode=!1}discardEdit(){this.EditMode=!1,this.ShowMode=!0,this.getDocuments()}drop(t){if(t.previousContainer===t.container)Zt(t.container.data,t.previousIndex,t.currentIndex);else if("available"===t.previousContainer.id&&"preview"===t.container.id){const i={...t.previousContainer.data[t.previousIndex]};this.existingInputs.find(n=>n.id===i.id)||this.previewFields.splice(t.currentIndex,0,i)}this.onDragExited()}removeField(t){if(this.EditMode){const n=this.previewFields[t].label,r={document_id:this.previewFields[t].id};this.documentService.DeleteDocument(r.document_id,r).subscribe({next:a=>{this.previewFields.splice(t,1),this._MessagesService.showSuccessMessage(`\u062a\u0645 \u062d\u0630\u0641 ${n}`,3e3)}})}else this.previewFields.splice(t,1)}getChangedItems(){const t=[];return this.previewFields.forEach(i=>{const n=this.existingInputs.find(r=>r.id===i.id);n&&(n.label!==i.label||n.data_type!==i.data_type||n.description!==i.description||n.is_unique!==i.is_unique||n.validators.is_required!==i.validators.is_required)&&t.push({document_id:i.id,name:i.label,description:i.description,data_type:i.data_type,is_unique:i.is_unique,is_required:i.validators.is_required?1:0})}),t}get isUpdateDisabled(){return this.previewFields.some(t=>!t.label||!t.description||void 0===t.validators.is_required)}updateFiles(){const t=this.getChangedItems();t?(0,$t.D)(t).pipe((0,jt.b)(i=>this.documentService.UpdateDocument(i.document_id,i))).subscribe({next:i=>{console.log("Update successful",i),this._MessagesService.showSuccessMessage("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0644\u0641\u0627\u062a \u0628\u0646\u062c\u0627\u062d ",3e3),this.EditMode=!1,this.ShowMode=!0,this.getDocuments()},error:i=>{console.error("Update failed",i)}}):(this.EditMode=!1,this.ShowMode=!0,this.getDocuments())}onSubmit(){const t=this.previewFields.filter(n=>!this.existingInputs.find(r=>r.id===n.id)),i=this.prepareAddPayload(t);i&&(0,$t.D)(i).pipe((0,jt.b)(n=>this.documentService.AddDocument(n))).subscribe({next:n=>{console.log("Creation successful",n),this._MessagesService.showSuccessMessage("\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d ",3e3),this.getDocuments()},error:n=>{console.error("Creation failed",n)}})}prepareAddPayload(t){if(t&&t.length>0){const i=[];return t.forEach(n=>{i.push({name:n.label,description:n.description,data_type:"text"===n.data_type?"string":n.data_type,is_unique:n.is_unique,is_required:n.validators.is_required?1:0})}),i}return null}onRequiredChange(t,i,n){n.validators.is_required=i}isFieldDisabled(t){return!(!t.id||this.EditMode)}showRemoveIcon(t){return!!this.EditMode||!t.id}updateLabel(t,i){i.label=t.target.value}updateDescription(t,i){i.description=t.target.value}onDragEntered(){const t=document.getElementById("preview");t&&t.classList.add("dragging-over")}onDragExited(){const t=document.getElementById("preview");t&&t.classList.remove("dragging-over")}onLabelFocus(t){t.target.select()}static#t=this.\u0275fac=function(i){return new(i||s)(e.Y36(p.qu),e.Y36(B.uw),e.Y36(v.gz),e.Y36(ui),e.Y36(L.K),e.Y36(v.F0))};static#e=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-corporate-documents"]],standalone:!0,features:[e.jDz],decls:12,vars:14,consts:[[1,"container-fluid","form-builder"],[1,"row",2,"gap","5%"],["class","col-12 col-md-4 col-lg-3 available-fields","cdkDropList","","id","available",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped",4,"ngIf"],["cdkDropList","","id","preview",1,"col-12","col-md-7","col-lg-8","form-preview",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped","cdkDragEntered","cdkDragExited"],[2,"text-align","center"],["type","button","class","btn btn-secondary btn-sm edit-btn","style","background-color: var(--main)",3,"click",4,"ngIf"],["type","button","class","btn btn-danger btn-sm discard-btn",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit"],["class","form-field d-flex align-items-start","cdkDrag","",4,"ngFor","ngForOf"],["class","btn btn-primary mt-3","type","submit","style","background-color: var(--main)",3,"disabled",4,"ngIf"],["class","btn btn-primary mt-3","style","background-color: var(--main)",3,"disabled","click",4,"ngIf"],["cdkDropList","","id","available",1,"col-12","col-md-4","col-lg-3","available-fields",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],[1,"available-title"],["cdkDrag","","class","availableItem",4,"ngFor","ngForOf"],["cdkDrag","",1,"availableItem"],[1,"draggable-indicator"],[1,"dot"],["type","button",1,"btn","btn-secondary","btn-sm","edit-btn",2,"background-color","var(--main)",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button",1,"btn","btn-danger","btn-sm","discard-btn",3,"click"],[1,"fa-regular","fa-trash-can"],["cdkDrag","",1,"form-field","d-flex","align-items-start"],[1,"dots_container"],[1,"draggable-indicator","mx-2"],[1,"flex-grow-1","pt-2"],["type","text",1,"form-control","w-100","mt-2",3,"value","disabled","blur","focus"],[1,"mt-2","row"],[1,"radio-container"],[1,"R-input-wrapper","w-25"],["type","radio","value","yes",3,"name","checked","disabled","change"],["type","radio","value","no",3,"name","checked","disabled","change"],[1,"mt-5"],[2,"font-size","1.1rem"],[1,"form-control","w-100",3,"disabled","value","blur"],["class","btn-group-vertical ms-3",4,"ngIf"],[1,"btn-group-vertical","ms-3"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["type","submit",1,"btn","btn-primary","mt-3",2,"background-color","var(--main)",3,"disabled"],[1,"btn","btn-primary","mt-3",2,"background-color","var(--main)",3,"disabled","click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,_i,4,4,"div",2),e.TgZ(3,"div",3),e.NdJ("cdkDropListDropped",function(a){return n.drop(a)})("cdkDragEntered",function(){return n.onDragEntered()})("cdkDragExited",function(){return n.onDragExited()}),e.TgZ(4,"h3",4),e._uU(5,"\u0627\u0644\u0645\u0644\u0641\u0627\u062a"),e.qZA(),e.YNc(6,fi,4,0,"button",5),e.YNc(7,vi,4,0,"button",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.YNc(9,xi,27,11,"div",8),e.YNc(10,Ci,2,1,"button",9),e.YNc(11,Di,2,1,"button",10),e.qZA()()()()),2&i&&(e.xp6(2),e.Q6J("ngIf",!n.documentExists),e.xp6(1),e.ekj("col-md-12",n.documentExists)("col-lg-12",n.documentExists),e.Q6J("cdkDropListData",n.previewFields)("cdkDropListConnectedTo",e.DdM(13,yi)),e.xp6(3),e.Q6J("ngIf",n.documentExists&&n.ShowMode&&n.previewFields.length>0),e.xp6(1),e.Q6J("ngIf",n.documentExists&&n.EditMode&&n.previewFields.length>0),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngForOf",n.previewFields),e.xp6(1),e.Q6J("ngIf",!n.EditMode&&!n.ShowMode&&n.previewFields.length>0),e.xp6(1),e.Q6J("ngIf",n.EditMode&&n.previewFields.length>0))},dependencies:[f.ez,f.sg,f.O5,p.UX,p._Y,p.JL,p.sg,pi,Qt,Bt],styles:[".form-builder[_ngcontent-%COMP%]   #available[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgb(0,41,107) 0%,rgb(0,91,180) 100%);padding:20px;max-height:450px}.form-builder[_ngcontent-%COMP%]   .available-title[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:12%}.form-builder[_ngcontent-%COMP%]   .availableItem[_ngcontent-%COMP%]{width:65%;margin:auto auto 5%;text-align:center;font-size:1.1rem;display:flex;justify-content:space-between;align-items:center;flex-direction:row-reverse}.form-builder[_ngcontent-%COMP%]   .availableItem[_ngcontent-%COMP%]   .draggable-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;padding:5px;border-radius:4px;margin-left:10px}.form-builder[_ngcontent-%COMP%]   .availableItem[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:4px;width:4px;background-color:gray;border-radius:50%;display:inline-block;margin:2px 0}.form-builder[_ngcontent-%COMP%]   .availableItem[_ngcontent-%COMP%]:hover{background:red}.form-builder[_ngcontent-%COMP%]   .available-fields[_ngcontent-%COMP%]{background:#f7f7f7}.form-builder[_ngcontent-%COMP%]   .available-fields[_ngcontent-%COMP%]   div[cdkDrag][_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;background:#fff;border:1px solid #ccc;border-radius:4px;cursor:grab}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]{background:#fff;padding:20px;border:1px solid #ccc;border-radius:4px;max-height:600px;overflow-y:scroll;transition:background-color .3s;position:relative}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--main);border-radius:10px}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%], .form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .discard-btn[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .discard-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:10px;font-size:1.1rem}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center;padding:10px;border:1px solid #ccc;border-radius:4px;background-color:#f7f7f7}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;font-size:1rem}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .btn-group-vertical[_ngcontent-%COMP%]{align-self:start}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .R-input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-top:2%}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:80%}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50%}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   div[cdkDrag][_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px;cursor:grab}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .dots_container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .dots_container[_ngcontent-%COMP%]   .draggable-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;border-radius:4px;height:100%}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   .dots_container[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:7px;width:7px;background-color:gray;border-radius:50%;display:inline-block;margin:2px}.form-builder[_ngcontent-%COMP%]   .form-preview[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;width:calc(100% - 80px)}.form-builder[_ngcontent-%COMP%]   .form-preview.dragging-over[_ngcontent-%COMP%]{background-color:#add8e6}.form-builder[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:disabled:checked + span[_ngcontent-%COMP%]{color:var(--main);font-weight:700}"]})}return s})();const wi=[{path:"",component:Xt,children:[{path:"",component:ae},{path:"add-corporate/:id",component:qe},{path:"view-corporate/:id",component:Ge},{path:"documents",component:Vt},{path:"documents/list",component:Vt}]}]}}]);