"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[407],{2135:(T,v,s)=>{s.d(v,{u:()=>d});var a=s(5879);let d=(()=>{class e{transform(r,u){return r?u?(u=u.toLowerCase(),r.filter(l=>{const f=l.full_name?l.full_name.toLowerCase():"",k=l.last_name?l.last_name.toLowerCase():"",g=l.title?l.title.toLowerCase():"",p=l.name?l.name.toLowerCase():"",m=l.user&&l.user.name?l.user.name.toLowerCase():"",w=l.head?l.head.toLowerCase():"",C=l.description?l.description.toLowerCase():"";return f.includes(u)||k.includes(u)||p.includes(u)||m.includes(u)||w.includes(u)||C.includes(u)||g.includes(u)})):r:[]}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275pipe=a.Yjl({name:"filter",type:e,pure:!0,standalone:!0})}return e})()},4407:(T,v,s)=>{s.r(v),s.d(v,{default:()=>I});var a=s(6814),d=s(846),e=s(5879);let c=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-main-packageowner"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[a.ez,d.lC]})}return o})();var r=s(6223),u=s(8733),l=s(4286),f=s(9862),k=s(553);let g=(()=>{class o{constructor(t){this.http=t,this.packageOwnerUrl=`${k.N.url}user/packages`}getPackageOwnersList(t){let n=new f.LE;return t&&Object.keys(t).forEach(i=>{n=n.append(i,t[i])}),this.http.get(this.packageOwnerUrl,{params:n})}getPackageOwnerById(t){return this.http.get(`${this.packageOwnerUrl}/${t}`)}updatePackageOwner(t,n,i){let _=new f.LE;i&&Object.keys(i).forEach(P=>{_=_.append(P,i[P])});const h=new FormData;return Object.keys(n).forEach(P=>{const x=n[P];h.append(P,null!=x?x.toString():"")}),this.http.post(`${this.packageOwnerUrl}/${t}`,h,{params:_})}deletePackageOwner(t){return this.http.delete(`${this.packageOwnerUrl}/${t}`)}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(f.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var p=s(7349);function m(o,O){if(1&o&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&o){const t=O.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function w(o,O){if(1&o&&(e.ynx(0),e.TgZ(1,"div",15)(2,"button",16),e._uU(3," \u0625\u0636\u0627\u0641\u0629 \u062d\u0632\u0645\u0629 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645 "),e.qZA()(),e.BQk()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.packageOwnerForm.valid)}}function C(o,O){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updatePackageOwner())}),e._uU(2," \u062a\u0639\u062f\u064a\u0644 "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.packageOwnerForm.valid)}}let b=(()=>{class o{constructor(t,n,i,_,h,P){this.localize=t,this.router=n,this.activatedRoute=i,this._MessagesService=_,this.ownerService=h,this.packageService=P,this.isEditMode=!1,this.packageOwner=[],this.packages=[],this.packageOwnerId="",this.packageOwnerForm=new r.cw({username:new r.NI(""),package_id:new r.NI("",r.kI.required)})}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const n=t.get("id");n&&(this.packageOwnerId=n,this.isEditMode=!0,this.ownerService.getPackageOwnerById(n).subscribe(i=>{i&&i.data&&(this.setFormValues(i.data),this.packageOwner=i.data)}))})}getPackageList(){this.packageService.packagesList().subscribe({next:t=>{this.packages=t.data},error:t=>{console.error("Error in packages list",t)}})}navigateToPackageOwnersList(){const t=this.localize.translateRoute("/dashboard/packageOwners");this.router.navigate([t])}setFormValues(t){this.packageOwnerForm.controls.package_id.setValue(t.package.id)}updatePackageOwner(){this.packageOwnerForm.valid&&this.ownerService.updatePackageOwner(this.packageOwnerId,{package_id:this.packageOwnerForm.controls.package_id.value||"",_method:"PATCH"}).subscribe({next:n=>{this.navigateToPackageOwnersList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:n=>{console.error("Failed to update package:",n)}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(u.An),e.Y36(d.F0),e.Y36(d.gz),e.Y36(l.K),e.Y36(g),e.Y36(p.M))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-packageowner"]],standalone:!0,features:[e.jDz],decls:19,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addPackage","role","tabpanel","aria-labelledby","addPackage-tab","tabindex","0",1,""],[3,"formGroup"],[1,"form-group","col-md-6","mb-3"],["for","username",1,"form-label"],["type","text","formControlName","username","readonly","","id","name",1,"form-control"],["for","package",1,"form-label"],["name","package","id","package","formControlName","package",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["editButton",""],[3,"value"],[1,"form-group","col-12","mb-3"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),e._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.qZA(),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"\u0627\u0644\u062d\u0632\u0645\u0629*"),e.qZA(),e.TgZ(14,"select",10),e.YNc(15,m,2,2,"option",11),e.qZA()()(),e.YNc(16,w,4,1,"ng-container",12),e.YNc(17,C,3,1,"ng-template",null,13,e.W1O),e.qZA()()()()()()),2&n){const _=e.MAs(18);e.xp6(5),e.Q6J("formGroup",i.packageOwnerForm),e.xp6(10),e.Q6J("ngForOf",i.packages),e.xp6(1),e.Q6J("ngIf",!i.isEditMode)("ngIfElse",_)}},dependencies:[a.ez,a.sg,a.O5,r.UX,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]})}return o})();var Z=s(1818),E=s(2135),L=s(8034),M=s(7700);const F=function(o,O){return[o,O]};function U(o,O){if(1&o){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"a",18)(6,"h4",19),e._uU(7),e.qZA(),e.TgZ(8,"h5",19),e._uU(9),e.qZA(),e.TgZ(10,"p",20),e._uU(11),e.qZA()()(),e.TgZ(12,"div",21)(13,"a",22),e.ALo(14,"localize"),e._uU(15,"\u062a\u0639\u062f\u064a\u0644 "),e._UZ(16,"i",23),e.qZA(),e.TgZ(17,"button",24),e.NdJ("click",function(){const _=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.deletePackageOwner(_.id,_.user.name))}),e._uU(18," \u062d\u0630\u0641 "),e._UZ(19,"i",25),e.qZA()()()()()()}if(2&o){const t=O.$implicit;e.xp6(7),e.hij(" \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: ",t.user.name," "),e.xp6(2),e.hij(" \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a: ",t.user.email," "),e.xp6(2),e.hij(" \u0627\u0633\u0645 \u0627\u0644\u062d\u0632\u0645\u0629: ",t.package.name," "),e.xp6(2),e.Q6J("routerLink",e.WLB(6,F,e.lcZ(14,4,"/dashboard/packageOwners/add-packageOwner"),t.id))}}function D(o,O){1&o&&(e.TgZ(0,"div",26)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}let A=(()=>{class o{constructor(t,n){this.dialog=t,this.ownerServices=n,this.packageOwners=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.getPackageOwnerList()}getPackageOwnerList(t=1){this.loading=!0,this.ownerServices.getPackageOwnersList({page:t}).subscribe({next:n=>{this.loading=!1,console.log(n.data),this.packageOwners=n.data,this.currentPage=n.pagination.current_page,this.totalPages=n.pagination.last_page},error:n=>{this.loading=!1,console.error("Error in packages list",n)}})}deletePackageOwner(t,n){this.dialog.open(L.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${n} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(_=>{_&&this.ownerServices.deletePackageOwner(t).subscribe({next:h=>{this.getPackageOwnerList()},error:h=>{console.error("There was an error deleting the package!",h)}})})}onPageChange(t){this.getPackageOwnerList(t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(M.uw),e.Y36(g))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-packageowners-list"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-xl-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mx-0"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-lg-6"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"card-text"],[1,"col-lg-6","mb-md-0","mb-2","text-end","px-0"],[1,"btn","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"text-center"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(h){return i.searchQuery=h}),e.qZA()()()()(),e.TgZ(10,"div",9),e.YNc(11,U,20,9,"div",10),e.ALo(12,"filter"),e.YNc(13,D,3,0,"div",11),e.ALo(14,"filter"),e.qZA(),e.TgZ(15,"pagination",12),e.NdJ("pageChange",function(h){return i.onPageChange(h)}),e.qZA()()()()),2&n&&(e.xp6(9),e.Q6J("ngModel",i.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,5,i.packageOwners,i.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(14,8,i.packageOwners,i.searchQuery).length&&!i.loading),e.xp6(2),e.Q6J("currentPage",i.currentPage)("totalPages",i.totalPages))},dependencies:[a.ez,a.sg,a.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,Z.Q,E.u,d.rH,u.fQ,u.lO]})}return o})();const I=[{path:"",component:c,children:[{path:"",component:A},{path:":slug",component:A},{path:"add-packageOwner/:id",component:b,data:{breadcrumbs:[{label:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0627\u0644\u0643 \u0627\u0644\u062d\u0632\u0645\u0629",url:"/dashboard/packageOwners/add-packageOwner"}]}},{path:"view-packageOwner/:id",component:b,data:{breadcrumbs:[{label:"\u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0627\u0644\u0643 \u0627\u0644\u062d\u0632\u0645\u0629",url:"/dashboard/packageOwners/view-packageOwner"}]}}]}]},8034:(T,v,s)=>{s.d(v,{$:()=>u});var a=s(6814),d=s(7700),e=s(2296),c=s(5879),r=s(4286);let u=(()=>{class l{constructor(k,g,p){this.dialogRef=k,this.data=g,this._MessagesService=p}onConfirmClick(){this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("Done",3e3)}onCancelClick(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(g){return new(g||l)(c.Y36(d.so),c.Y36(d.WI),c.Y36(r.K))};static#t=this.\u0275cmp=c.Xpm({type:l,selectors:[["app-confirm-dialog"]],standalone:!0,features:[c.jDz],decls:10,vars:2,consts:[[1,"text-center"],["mat-dialog-title","",1,"text-center"],[1,"m-auto"],["mat-button","",3,"click"],["mat-button","","olor","primary",2,"color","red",3,"click"]],template:function(g,p){1&g&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2),c.qZA(),c.TgZ(3,"mat-dialog-content"),c._uU(4),c.qZA(),c.TgZ(5,"mat-dialog-actions",2)(6,"button",3),c.NdJ("click",function(){return p.onCancelClick()}),c._uU(7,"\u0627\u0644\u063a\u0627\u0621"),c.qZA(),c.TgZ(8,"button",4),c.NdJ("click",function(){return p.onConfirmClick()}),c._uU(9," \u062a\u0627\u0643\u064a\u062f "),c.qZA()()()),2&g&&(c.xp6(2),c.Oqu(p.data.title),c.xp6(2),c.Oqu(p.data.message))},dependencies:[a.ez,d.Is,d.uh,d.xY,d.H8,e.ot,e.lW],styles:["mat-dialog-content[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}return l})()},1818:(T,v,s)=>{s.d(v,{Q:()=>l});var a=s(5879),d=s(6223),e=s(6814);function c(f,k){if(1&f){const g=a.EpF();a.TgZ(0,"li",2)(1,"a",7),a.NdJ("click",function(){const w=a.CHM(g).index,C=a.oxw();return a.KtG(C.navigateTo(w+1))}),a._uU(2),a.qZA()()}if(2&f){const g=k.index,p=a.oxw();a.ekj("active",p.currentPage===g+1),a.xp6(2),a.Oqu(g+1)}}const r=function(){return[]},u={provide:d.JU,useExisting:(0,a.Gpc)(()=>l),multi:!0};let l=(()=>{class f{constructor(){this.pageChange=new a.vpe}navigateTo(g){this.pageChange.emit(g),this.scrollToTop()}ngOnInit(){}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}static#e=this.\u0275fac=function(p){return new(p||f)};static#t=this.\u0275cmp=a.Xpm({type:f,selectors:[["pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[a._Bn([u]),a.jDz],decls:11,vars:6,consts:[["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item","mx-2"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item mx-2",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"]],template:function(p,m){1&p&&(a.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),a.NdJ("click",function(){return m.navigateTo(m.currentPage-1)}),a.TgZ(4,"span",4),a._uU(5,"\xab"),a.qZA()()(),a.YNc(6,c,3,3,"li",5),a.TgZ(7,"li",2)(8,"a",6),a.NdJ("click",function(){return m.navigateTo(m.currentPage+1)}),a.TgZ(9,"span",4),a._uU(10,"\xbb"),a.qZA()()()()()),2&p&&(a.xp6(2),a.ekj("disabled",1===m.currentPage),a.xp6(4),a.Q6J("ngForOf",a.DdM(5,r).constructor(m.totalPages)),a.xp6(1),a.ekj("disabled",m.currentPage===m.totalPages))},dependencies:[e.ez,e.sg],styles:[".pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return f})()}}]);