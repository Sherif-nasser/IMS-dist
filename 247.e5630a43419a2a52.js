"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[247],{4247:(F,m,i)=>{i.r(m),i.d(m,{default:()=>T});var u=i(6814),l=i(846),w=i(8733),y=i(8034),d=i(6223),f=i(1818),v=i(2135),c=i(7700),b=i(4170),k=i(2032),e=i(5879),p=i(5976),C=i(4286);function A(s,g){1&s&&(e.TgZ(0,"div",10),e._uU(1," \u0627\u0644\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0641\u062a\u0627\u062d\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629 "),e.qZA())}let h=(()=>{class s{constructor(t,o,r,n){this.dialogRef=t,this.data=o,this.keywordsService=r,this._MessagesService=n,this.isEditMode=!1,this.keywordId="",this.keywordForm=new d.cw({word:new d.NI("",d.kI.required)}),o&&o.keywordId&&(this.keywordId=o.keywordId,this.isEditMode=!0,this.keywordsService.getKeywordById(this.keywordId).subscribe(a=>{a&&a.data&&this.setFormValues(a.data)}))}setFormValues(t){console.log(t),this.keywordForm.controls.word.setValue(t.word)}updateKeyword(){this.keywordForm.valid&&this.keywordsService.updateKeyword(this.keywordId,{word:this.keywordForm.controls.word.value||"",_method:"PATCH"}).subscribe({next:o=>{this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to update keyword:",o)}})}onSubmit(){if(this.keywordForm.valid){const t={word:this.keywordForm.controls.word.value||""};this.isEditMode?(t._method="PATCH",this.keywordsService.updateKeyword(this.keywordId,t).subscribe({next:o=>{this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to add keyword:",o)}})):this.keywordsService.addKeyword(t).subscribe({next:o=>{this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",3e3)},error:o=>{console.error("Failed to add keyword:",o)}})}}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(c.so),e.Y36(c.WI),e.Y36(p.M),e.Y36(C.K))};static#o=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-keyword"]],standalone:!0,features:[e.jDz],decls:14,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","dialog-container"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","word",1,"form-label"],["type","text","name","word","id","word","formControlName","word",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-group"],["type","submit",1,"btn","px-5",3,"disabled"],[1,"text-danger"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"\u0627\u0644\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0641\u062a\u0627\u062d\u064a\u0629*"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,A,2,0,"div",7),e.qZA(),e.TgZ(11,"div",8)(12,"button",9),e._uU(13),e.qZA()()()()()()),2&o&&(e.xp6(4),e.Oqu(r.isEditMode?"\u062a\u0639\u062f\u064a\u0644 \u0643\u0644\u0645\u0629 \u0645\u0641\u062a\u0627\u062d\u064a\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0643\u0644\u0645\u0629 \u0645\u0641\u062a\u0627\u062d\u064a\u0629"),e.xp6(1),e.Q6J("formGroup",r.keywordForm),e.xp6(5),e.Q6J("ngIf",r.keywordForm.controls.word.invalid&&(r.keywordForm.controls.word.dirty||r.keywordForm.controls.word.touched)),e.xp6(2),e.Q6J("disabled",!r.keywordForm.valid),e.xp6(1),e.hij(" ",r.isEditMode?"\u062a\u0639\u062f\u064a\u0644":"\u0625\u0636\u0627\u0641\u0629"," "))},dependencies:[u.ez,u.O5,d.UX,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,b.lN,k.c],styles:[".dialog-container[_ngcontent-%COMP%]{padding-top:3%;padding-bottom:3%}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}"]})}return s})();function K(s,g){if(1&s){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"a",18)(6,"h3",19),e._uU(7),e.qZA()()(),e.TgZ(8,"div",20)(9,"button",21),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openEditKeywordDialog(n.id))}),e._uU(10," \u062a\u0639\u062f\u064a\u0644 "),e.qZA(),e.TgZ(11,"button",22),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteKeyword(n.id,n.word))}),e._uU(12," \u062d\u0630\u0641 "),e.qZA()()()()()()}if(2&s){const t=g.$implicit;e.xp6(7),e.hij(" ",t.word," ")}}function M(s,g){1&s&&(e.TgZ(0,"div",23)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}const T=[{path:"",component:(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#o=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-main-keywords"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(o,r){1&o&&e._UZ(0,"router-outlet")},dependencies:[u.ez,l.lC]})}return s})(),children:[{path:"",component:(()=>{class s{constructor(t,o,r,n){this.keywordsService=t,this.router=o,this.localize=r,this.dialog=n,this.keywords=[],this.searchQuery="",this.loading=!0}ngOnInit(){this.getListKeywords(),this.keywordsService.initializeNavItems()}getListKeywords(t=1){this.loading=!0,this.keywordsService.getKeywordsList({page:t}).subscribe({next:o=>{this.keywords=o.data.data,this.currentPage=o.data.current_page,this.totalPages=o.data.last_page,this.loading=!1},error:o=>{this.loading=!1,console.error("There was an error!",o)}})}deleteKeyword(t,o){this.dialog.open(y.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${o} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(n=>{n&&this.keywordsService.deleteKeyword(t.toString()).subscribe({next:a=>{this.getListKeywords()},error:a=>{console.error("There was an error deleting the keyword!",a)}})})}navigateToAddKeywords(){const t=this.localize.translateRoute("/dashboard/keywords/add-keywords");this.router.navigate([t])}openAddKeywordDialog(){this.dialog.open(h,{width:"800px",data:{}}).afterClosed().subscribe(o=>{o&&this.getListKeywords()})}openEditKeywordDialog(t){this.dialog.open(h,{width:"800px",data:{keywordId:t}}).afterClosed().subscribe(r=>{r&&this.getListKeywords()})}viewKeyword(t){if(t){const o=this.localize.translateRoute("/dashboard/keywords/view-keywords");this.router.navigate([o,t.id])}else console.error("No keyword to view")}onPageChange(t){this.getListKeywords(t)}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(p.M),e.Y36(l.F0),e.Y36(w.An),e.Y36(c.uw))};static#o=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-keywords-list"]],standalone:!0,features:[e.jDz],decls:18,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs"],[1,"btn","btn-primary","mb-4",3,"click"],["action","",1,"mb-4","filterForm"],[1,"col-lg-4","col-md-6","mb-lg-0","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","searchKeywords","id","searchKeywords","placeholder","\u0628\u062d\u062b...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-6 mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-2"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-xl-7","col-md-8","order-md-1","order-2"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"col-xl-5","col-md-4","order-md-2","order-1","mb-md-0","mb-2","text-end"],[1,"btn","px-4","mx-1","edit",3,"click"],[1,"btn","delete","px-4",3,"click"],[1,"text-center"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return r.openAddKeywordDialog()}),e._uU(4," \u0625\u0636\u0627\u0641\u0629 \u0643\u0644\u0645\u0629 \u0645\u0641\u062a\u0627\u062d\u064a\u0629 "),e.qZA(),e.TgZ(5,"form",4)(6,"div",1)(7,"div",5)(8,"div",6)(9,"button",7),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(a){return r.searchQuery=a}),e.qZA()()()()(),e.TgZ(12,"div",1),e.YNc(13,K,13,1,"div",10),e.ALo(14,"filter"),e.YNc(15,M,3,0,"div",11),e.ALo(16,"filter"),e.qZA(),e.TgZ(17,"pagination",12),e.NdJ("pageChange",function(a){return r.onPageChange(a)}),e.qZA()()()()),2&o&&(e.xp6(11),e.Q6J("ngModel",r.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(14,5,r.keywords,r.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(16,8,r.keywords,r.searchQuery).length&&!r.loading),e.xp6(2),e.Q6J("currentPage",r.currentPage)("totalPages",r.totalPages))},dependencies:[u.ez,u.sg,u.O5,l.Bz,w.fQ,f.Q,d.u5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,v.u],styles:[".tabs[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a;color:var(--dashboard1)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}a.show[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}a.edit[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}"]})}return s})()}]}]}}]);